<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Creating Meta-rigs &mdash; Blender Manual</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme_overrides.css?v=8da28a04" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/version_switch.css?v=74ca2809" />

  
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="canonical" href="https://docs.blender.org/manual/en/latest/addons/rigging/rigify/metarigs.html" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=715c20a1"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../_static/js/version_switch.js?v=5cbd935e"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Blender Manual"
          href="../../../_static/opensearch.xml"/>
<link rel="alternate" hreflang="en" href="https://docs.blender.org/manual/en/latest/" />
<link rel="alternate" hreflang="ar" href="https://docs.blender.org/manual/ar/latest/" />
<link rel="alternate" hreflang="de" href="https://docs.blender.org/manual/de/latest/" />
<link rel="alternate" hreflang="es" href="https://docs.blender.org/manual/es/latest/" />
<link rel="alternate" hreflang="fi" href="https://docs.blender.org/manual/fi/latest/" />
<link rel="alternate" hreflang="fr" href="https://docs.blender.org/manual/fr/latest/" />
<link rel="alternate" hreflang="id" href="https://docs.blender.org/manual/id/latest/" />
<link rel="alternate" hreflang="it" href="https://docs.blender.org/manual/it/latest/" />
<link rel="alternate" hreflang="ja" href="https://docs.blender.org/manual/ja/latest/" />
<link rel="alternate" hreflang="ko" href="https://docs.blender.org/manual/ko/latest/" />
<link rel="alternate" hreflang="nb" href="https://docs.blender.org/manual/nb/latest/" />
<link rel="alternate" hreflang="pt" href="https://docs.blender.org/manual/pt/latest/" />
<link rel="alternate" hreflang="ru" href="https://docs.blender.org/manual/ru/latest/" />
<link rel="alternate" hreflang="sk" href="https://docs.blender.org/manual/sk/latest/" />
<link rel="alternate" hreflang="sl" href="https://docs.blender.org/manual/sl/latest/" />
<link rel="alternate" hreflang="sr" href="https://docs.blender.org/manual/sr/latest/" />
<link rel="alternate" hreflang="uk" href="https://docs.blender.org/manual/uk/latest/" />
<link rel="alternate" hreflang="vi" href="https://docs.blender.org/manual/vi/latest/" />
<link rel="alternate" hreflang="zh-Hans" href="https://docs.blender.org/manual/zh-hans/latest/" />
<link rel="alternate" hreflang="zh-Hant" href="https://docs.blender.org/manual/zh-hant/latest/" />
<link rel="alternate" hreflang="x-default" href="https://docs.blender.org/manual/en/latest/" />

    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="copyright" title="Copyright" href="../../../copyright.html" />
    <link rel="next" title="Rig Types" href="rig_types/index.html" />
    <link rel="prev" title="Generated Rig Features" href="rig_features.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Blender 4.0 Manual
              <img src="../../../_static/blender-logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/about/index.html">About Blender</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/installing/index.html">Installing Blender</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/configuration/index.html">Configuring Blender</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/help.html">Help System</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Sections</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../interface/index.html">User Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../editors/index.html">Editors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../scene_layout/index.html">Scenes &amp; Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../modeling/index.html">Modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sculpt_paint/index.html">Sculpting &amp; Painting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../grease_pencil/index.html">Grease Pencil</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../animation/index.html">Animation &amp; Rigging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../physics/index.html">Physics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../render/index.html">Rendering</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../compositing/index.html">Compositing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../movie_clip/index.html">Motion Tracking &amp; Masking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../video_editing/index.html">Video Editing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../files/index.html">Assets, Files, &amp; Data System</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Add-ons</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html#add-ons-category-listings">Add-ons Category Listings</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../3d_view/index.html">3D View</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../add_curve/index.html">Add Curve</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../add_mesh/index.html">Add Mesh</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../animation/index.html">Animation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../baking/index.html">Baking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../camera/index.html">Camera</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../development/index.html">Development</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../import_export/index.html">Import-Export</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../interface/index.html">Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../lighting/index.html">Lighting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../materials/index.html">Materials</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../mesh/index.html">Mesh</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../node/index.html">Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../object/index.html">Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../paint/index.html">Paint</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../render/index.html">Render</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">Rigging</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="index.html">Rigify</a><ul class="current">
<li class="toctree-l5"><a class="reference internal" href="index.html#basics">Basics</a></li>
<li class="toctree-l5 current"><a class="reference internal" href="index.html#customization">Customization</a><ul class="current">
<li class="toctree-l6 current"><a class="current reference internal" href="#">Creating Meta-rigs</a><ul>
<li class="toctree-l7"><a class="reference internal" href="#how-rigify-works">How Rigify Works</a></li>
<li class="toctree-l7"><a class="reference internal" href="#creating-a-new-meta-rig">Creating a new Meta-rig</a><ul>
<li class="toctree-l8"><a class="reference internal" href="#add-a-new-armature-object">Add a new Armature Object</a></li>
<li class="toctree-l8"><a class="reference internal" href="#editing-the-armature">Editing the Armature</a><ul>
<li class="toctree-l9"><a class="reference internal" href="#adding-samples-basic">Adding Samples (Basic)</a></li>
<li class="toctree-l9"><a class="reference internal" href="#using-rig-types-advanced">Using Rig Types (Advanced)</a><ul>
<li class="toctree-l10"><a class="reference internal" href="#bone-collection-references">Bone Collection References</a></li>
</ul>
</li>
<li class="toctree-l9"><a class="reference internal" href="#preserved-bone-properties">Preserved Bone Properties</a></li>
<li class="toctree-l9"><a class="reference internal" href="#custom-root-bone">Custom Root Bone</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l7"><a class="reference internal" href="#color-sets">Color Sets</a></li>
<li class="toctree-l7"><a class="reference internal" href="#bone-collections-ui">Bone Collections UI</a><ul>
<li class="toctree-l8"><a class="reference internal" href="#ui-layout-sub-panel">UI Layout sub-panel</a></li>
</ul>
</li>
<li class="toctree-l7"><a class="reference internal" href="#actions">Actions</a><ul>
<li class="toctree-l8"><a class="reference internal" href="#normal-actions">Normal Actions</a></li>
<li class="toctree-l8"><a class="reference internal" href="#corrective-actions">Corrective Actions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l6"><a class="reference internal" href="rig_types/index.html">Rig Types</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="index.html#extensions">Extensions</a></li>
<li class="toctree-l5"><a class="reference internal" href="index.html#development">Development</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../sequencer/index.html">Sequencer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../system/index.html">System</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../uv/index.html">UV</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../video_tools/index.html">Video Tools</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../advanced/index.html">Advanced</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../troubleshooting/index.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary/index.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../genindex.html">Manual Index</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Get Involved</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../contribute/index.html">Contribute Documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Blender 4.0 Manual</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Add-ons</a></li>
          <li class="breadcrumb-item"><a href="../index.html">Rigging</a></li>
          <li class="breadcrumb-item"><a href="index.html">Rigify</a></li>
      <li class="breadcrumb-item active">Creating Meta-rigs</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="creating-meta-rigs">
<h1>Creating Meta-rigs<a class="headerlink" href="#creating-meta-rigs" title="Link to this heading"></a></h1>
<ol class="arabic simple">
<li><p>Add a single bone from the <span class="menuselection">Add ‣ Armature</span> menu.</p></li>
<li><p>Go in armature Edit Mode and build the meta rig by samples or Rigify-types.</p></li>
<li><p>Define the <a class="reference internal" href="#bpy-types-bonecollection-rigify-ui-row"><span class="std std-ref">Rigify bone collection UI</span></a>,
<a class="reference internal" href="#bpy-types-armature-rigify-colors"><span class="std std-ref">color sets</span></a>, and selection sets.</p></li>
<li><p>In the armature properties click on the <em>Generate</em> button to generate the rig.</p></li>
</ol>
<section id="how-rigify-works">
<h2>How Rigify Works<a class="headerlink" href="#how-rigify-works" title="Link to this heading"></a></h2>
<dl>
<dt>Rigify Meta-Rigs are split in multiple Sub-Rigs</dt><dd><p>A meta-rig is an assembly of bone chains. A bone chain is identified by the <em>Connected</em> attribute.
Bone chains can be further connected together by parenting them without using the <em>Connected</em> attribute
(i.e. using the <em>Keep Offset</em> option while parenting).</p>
</dd>
<dt>A custom attribute is set on the first bone of the sub-rig chain</dt><dd><p>Each first bone of a bone chain has a custom attribute on it which is a Rigify custom property
that identifies the sub-rig type. At rig generation time Rigify will determine which controls and
deform bones will be created processing the meta-rig from the first bone to the last of each chain.</p>
<figure class="align-default" id="id2">
<img alt="../../../_images/addons_rigging_rigify_metarigs_split-samples.png" src="../../../_images/addons_rigging_rigify_metarigs_split-samples.png" />
<figcaption>
<p><span class="caption-text">Human meta-rig split by samples.</span><a class="headerlink" href="#id2" title="Link to this image"></a></p>
</figcaption>
</figure>
</dd>
<dt>New meta-rigs are created assembling sub-rigs samples</dt><dd><p>Since a meta-rig is just a collection of sub-rigs,
new meta-rigs can be built assembling sub-rigs in different ways.
This way an infinite number of meta-rigs can be built from the same rigging blocks.</p>
<figure class="align-default" id="id3">
<img alt="../../../_images/addons_rigging_rigify_metarigs_built-samples.png" src="../../../_images/addons_rigging_rigify_metarigs_built-samples.png" />
<figcaption>
<p><span class="caption-text">Human meta-rig split by samples.</span><a class="headerlink" href="#id3" title="Link to this image"></a></p>
</figcaption>
</figure>
</dd>
<dt>All the mechanics, deformation bones and widget are created on a single click</dt><dd><p>The meta-rig contains more information than the visualized bones.
In fact at generation time Rigify will identify each sub-rig type and depending on
the selected options will create all the sophisticated controls, switches, and
deforming bones with a single click.</p>
</dd>
</dl>
</section>
<section id="creating-a-new-meta-rig">
<h2>Creating a new Meta-rig<a class="headerlink" href="#creating-a-new-meta-rig" title="Link to this heading"></a></h2>
<section id="add-a-new-armature-object">
<h3>Add a new Armature Object<a class="headerlink" href="#add-a-new-armature-object" title="Link to this heading"></a></h3>
<div class="refbox admonition" id="id1">
<p class="admonition-title">Reference</p>
<dl class="field-list simple">
<dt class="field-odd">Mode<span class="colon">:</span></dt>
<dd class="field-odd"><p>Object Mode</p>
</dd>
<dt class="field-even">Menu<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="menuselection">Add ‣ Armature ‣ Single Bone</span></p>
</dd>
<dt class="field-odd">Shortcut<span class="colon">:</span></dt>
<dd class="field-odd"><p><kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">Shift</kbd>-<kbd class="kbd docutils literal notranslate">A</kbd></kbd></p>
</dd>
</dl>
</div>
<p>Building your own meta-rig from scratch requires an armature object to work with.
Just add a single bone from the <em>Add</em> menu.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>At this stage naming the newly added armature <code class="docutils literal notranslate"><span class="pre">metarig</span></code> is a good idea.
You can do it at any time (or not at all) but it’s suggested to do it before going on
so it will always be clear on which armature you have to work when editing the meta-rig structure.</p>
</div>
</section>
<section id="editing-the-armature">
<h3>Editing the Armature<a class="headerlink" href="#editing-the-armature" title="Link to this heading"></a></h3>
<p>Now that there is an armature object to work – with the armature selected – enter armature Edit Mode.
Building a meta-rig from scratch in Edit Mode can be done in two ways:</p>
<ol class="arabic simple">
<li><p>Adding rig samples.</p></li>
<li><p>Creating bone chains.</p></li>
</ol>
<section id="adding-samples-basic">
<h4>Adding Samples (Basic)<a class="headerlink" href="#adding-samples-basic" title="Link to this heading"></a></h4>
<p>Adding pre-defined samples in Edit Mode is a good way to start building a meta-rig.
This way you can become familiar with the available building blocks and how they are meant to be used.
To add a rig sample:</p>
<ol class="arabic simple">
<li><p>Go in the armature tab.</p></li>
<li><p>Scroll down to Rigify panel.</p></li>
<li><p>Select a sample from the list.</p></li>
<li><p>Click on the <em>Add sample</em> button.</p></li>
<li><p>Edit the bone positions to match your character.</p></li>
</ol>
<p>For the list of available samples, see the <a class="reference internal" href="rig_types/index.html"><span class="doc">Rig Types</span></a> page.</p>
</section>
<section id="using-rig-types-advanced">
<span id="bpy-types-rigifyparameters"></span><span id="bpy-types-posebone-rigify-type"></span><h4>Using Rig Types (Advanced)<a class="headerlink" href="#using-rig-types-advanced" title="Link to this heading"></a></h4>
<figure class="align-right">
<a class="reference internal image-reference" href="../../../_images/addons_rigging_rigify_metarigs_rigify-type-panel.png"><img alt="../../../_images/addons_rigging_rigify_metarigs_rigify-type-panel.png" src="../../../_images/addons_rigging_rigify_metarigs_rigify-type-panel.png" style="width: 300px;" /></a>
</figure>
<p>For full control, you can use the Rigify Type panel of bone properties in Pose Mode to assign
any Rigify sub-rig type to any bone, as well as change its options.</p>
<p>For the list of available sub-rig types and their options, see the <a class="reference internal" href="rig_types/index.html"><span class="doc">Rig Types</span></a> page.</p>
<p>At the top of the panel you can find a field specifying the rig type for the active bone. The drop-down list
can be optionally filtered by the <a class="reference internal" href="feature_sets.html"><span class="doc">Feature Set</span></a> it belongs to.</p>
<p>Below that you can change options relevant to the selected rig type, if it has any.</p>
<section id="bone-collection-references">
<h5>Bone Collection References<a class="headerlink" href="#bone-collection-references" title="Link to this heading"></a></h5>
<p>Some rig types that generate many control bones have options that reference
<a class="reference internal" href="#bpy-types-bonecollection-rigify-ui-row"><span class="std std-ref">Bone Collections</span></a>. These reference lists have a standard UI with
the following features:</p>
<ul class="simple">
<li><p>A checkbox controlling whether the reference should be used.</p></li>
<li><p>A button to copy the reference list contents from the active to all selected bones.</p></li>
<li><p>A plus button to add a new reference to the list.</p></li>
<li><p>A list of references, each entry with a field to specify the target collection,
and a button to remove the entry from the list.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Each sub rig has a required number of bones as input. If you are unsure on how to use rig-types properties,
add a rig sample to your armature to see how it is supposed to be used.</p>
</div>
</section>
</section>
<section id="preserved-bone-properties">
<h4>Preserved Bone Properties<a class="headerlink" href="#preserved-bone-properties" title="Link to this heading"></a></h4>
<p>Certain properties of the metarig bones are often copied to the generated rig control, deform and mechanism bones.</p>
<p>The exact set depends on the sub-rig and the specific generated bone, and the sub-rig may override some properties
even when it preserves others from the same subset, but there are certain common patterns:</p>
<dl>
<dt>Parenting Settings</dt><dd><p>This subset consists of the parent ORG bone, Use Connect, Use Inherit Rotation, Use Local Location, and Inherit Scale.</p>
<p>It is usually copied to deform bones, FK controls, and in other cases where the sub-rig doesn’t have a reason
to completely override them.</p>
</dd>
<dt>Bendy Bone Settings (Edit Mode)</dt><dd><p>Consist of the segment count, Vertex Mapping Mode, Ease In/Out, Roll In/Out, Curve In/Out and Scale In/Out.</p>
<p>The segment count is often overridden via a sub-rig option, but other settings are usually copied to deform
bones as is.</p>
</dd>
<dt>Transformation Settings</dt><dd><p>Consist of the rotation mode, pose mode rotation values, and channel locks.</p>
<p>These settings are usually copied to FK controls.</p>
</dd>
<dt>Custom Properties</dt><dd><p>Usually copied to one of the controls generated based on the metarig bone (mainly FK). Intra-armature drivers
that access the property are retargeted to the copied instance.</p>
</dd>
<dt>Custom Widget</dt><dd><p>Usually copied to one of the controls generated based on the metarig bone (mainly FK), and suppresses automatic
generation of a widget for the bone if specified.</p>
</dd>
</dl>
</section>
<section id="custom-root-bone">
<h4>Custom Root Bone<a class="headerlink" href="#custom-root-bone" title="Link to this heading"></a></h4>
<p>If the meta-rig contains a bone called <code class="docutils literal notranslate"><span class="pre">root</span></code>, it is used as the root control bone instead of creating a new one.
This allows changing the rest position of the root bone, assigning a custom widget,
or adding custom properties to the bone.</p>
<p>The custom root bone must have no parent, and use the <a class="reference internal" href="rig_types/basic.html#rigify-rigs-basic-raw-copy"><span class="std std-ref">basic.raw_copy</span></a> sub-rig
type or none.</p>
</section>
</section>
</section>
<section id="color-sets">
<span id="bpy-types-rigifyarmaturelayer"></span><span id="bpy-types-rigifyselectioncolors"></span><span id="bpy-types-armature-rigify-colors-index"></span><span id="bpy-types-armature-rigify-theme-to-add"></span><span id="bpy-types-armature-rigify-colors-lock"></span><span id="bpy-types-armature-rigify-colors"></span><span id="bpy-ops-armature-rigify-add-bone-groups"></span><span id="bpy-ops-armature-rigify-apply-selection-colors"></span><h2>Color Sets<a class="headerlink" href="#color-sets" title="Link to this heading"></a></h2>
<figure class="align-right">
<a class="reference internal image-reference" href="../../../_images/addons_rigging_rigify_metarigs_color-sets-panel.png"><img alt="../../../_images/addons_rigging_rigify_metarigs_color-sets-panel.png" src="../../../_images/addons_rigging_rigify_metarigs_color-sets-panel.png" style="width: 300px;" /></a>
</figure>
<p>The Color Sets panel is used to define the bone color scheme for the final rig. The colors from the list
can be associated with bone collections from the relevant panel.</p>
<p>The top two rows of the Color Sets panel are used to define the general behavior of the bone colors.
Usually color themes use a gradient of colors to define the different bone states: default, selected and active.
When multiple color themes are used in the same rig, identifying which bone is selected or
active can be tricky since each color will have its corresponding state.</p>
<p>To override this behavior Rigify unifies the active and selected states using the same color.
This is defined by two values:</p>
<dl class="simple">
<dt>Unified Selected/Active Colors</dt><dd><p>When this option is active adding a bone group in the list will always keep the colors consistent.
When a color scheme is added from a theme, the color scheme is loaded as is.
Click on the <em>Apply</em> button to force the system to unify selected and active colors.</p>
</dd>
<dt>Selected/Active Colors</dt><dd><p>This two color fields define respectively the <em>Selected</em> and <em>Active</em> colors.
By default Rigify reads these colors from the theme defined by the user in the Blender preferences.
This way the <em>Selected</em>/<em>Active</em> colors can always have a predictable and consistent behavior in the UI.
The colors can be customized by clicking on the relevant color field.
To reset them to the Blender current theme value just click on the button with the update icon.</p>
</dd>
</dl>
<p>Color Sets can be added and deleted by clicking on the <code class="docutils literal notranslate"><span class="pre">+</span></code> or <code class="docutils literal notranslate"><span class="pre">-</span></code> buttons.
All color sets can be deleted at once by clicking on the Specials menu.</p>
<p>To add the colors from the predefined Rigify default color scheme (as shown in the image) to the list click
the <em>Add Standard</em> button.</p>
<p>To add a specific theme with its own color scheme, select it from the list and click on the <em>Add From Theme</em> button.</p>
</section>
<section id="bone-collections-ui">
<span id="bpy-types-bonecollection-rigify-ui-row"></span><h2>Bone Collections UI<a class="headerlink" href="#bone-collections-ui" title="Link to this heading"></a></h2>
<figure class="align-right">
<a class="reference internal image-reference" href="../../../_images/addons_rigging_rigify_metarigs_bone-collections-panel.png"><img alt="../../../_images/addons_rigging_rigify_metarigs_bone-collections-panel.png" src="../../../_images/addons_rigging_rigify_metarigs_bone-collections-panel.png" style="width: 300px;" /></a>
</figure>
<p><a class="reference internal" href="../../../animation/armatures/bones/bone_collections.html"><span class="doc">Bone Collections</span></a> are used to group related bones together
so that they can be hidden or revealed together.</p>
<p>Rigify can take advantage of collections to generate extra features and the user interface for the final rig.
A panel named <a class="reference internal" href="rig_features.html#rigify-rig-ui-template-riglayers"><span class="std std-ref">Rig Layers</span></a> is generated with buttons for hiding the
collections, arranged in an intuitive layout.</p>
<p>The Bone Collections UI panel allows configuring the layout of that generated panel, as well as specifying some
other settings for bone collections, such as the color set to use.</p>
<p>The top of the panel is occupied by a list that duplicates the main bone collection list, but displays additional
properties, such as the color set, whether the collection has a button, or whether it generates a selection set.</p>
<dl>
<dt>Validate Collection References</dt><dd><p>Some sub-rig types have <a class="reference internal" href="#bpy-types-rigifyparameters"><span class="std std-ref">references</span></a> to bone collections in their properties.
Rigify uses a referencing scheme that is robust to collection renames, but deleting collections or joining armatures
can still lead to broken references.</p>
<p>This button runs a scan that validates and normalizes all collection references, reporting any errors, and
reducing the chance of breakage being caused by subsequent user actions.</p>
<p>This scan is also performed automatically every time the rig is generated.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>To avoid breakage this operation should be used both immediately before and after joining two metarig armatures.
More specifically, it must be always done between the actions of renaming any collections and joining.</p>
</div>
</dd>
<dt>Color Set</dt><dd><p>Specifies the <a class="reference internal" href="#bpy-types-armature-rigify-colors"><span class="std std-ref">color set</span></a> to use for bones in this collection. If a bone
belongs to multiple collections, in general the collection located earlier in the list has priority.</p>
</dd>
<dt>Add Selection Set</dt><dd><p>Specifies whether a selection set should be generated for this collection.</p>
</dd>
<dt>UI Row</dt><dd><p>If nonzero, specifies which row of the <a class="reference internal" href="rig_features.html#rigify-rig-ui-template-riglayers"><span class="std std-ref">Rig Layers</span></a> panel should contain the
button controlling the visibility of this collection. When zero, no button is generated, and the collection is hidden.</p>
</dd>
<dt>UI Title</dt><dd><p>This field can be used to override the title used on the UI button to be distinct from the true collection name.
Unlike collection names, titles are not required to be unique, so this can be used to reduce clutter by relying
on contextual cues within the panel.</p>
</dd>
</dl>
<section id="ui-layout-sub-panel">
<h3>UI Layout sub-panel<a class="headerlink" href="#ui-layout-sub-panel" title="Link to this heading"></a></h3>
<figure class="align-right">
<a class="reference internal image-reference" href="../../../_images/addons_rigging_rigify_metarigs_bone-collections-layout-panel.png"><img alt="../../../_images/addons_rigging_rigify_metarigs_bone-collections-layout-panel.png" src="../../../_images/addons_rigging_rigify_metarigs_bone-collections-layout-panel.png" style="width: 300px;" /></a>
</figure>
<p>The UI Layout sub-panel provides a WYSIWYG editor for the layout of the generated UI panel
(as defined by the UI Row and UI Title settings above).</p>
<p>Each row contains three buttons at the end:</p>
<dl class="simple">
<dt>Arrow</dt><dd><p>Moves the active collection button to this row.</p>
</dd>
<dt>Plus</dt><dd><p>Inserts a new row before the current one.</p>
</dd>
<dt>Minus</dt><dd><p>Removes the current row and shifts all buttons up.</p>
</dd>
</dl>
<p>To the left of the editing control buttons, rows display buttons corresponding to the collections, same as the final
UI, except that rather than hiding or unhiding, clicking these buttons selects the collection.</p>
<p>For the active collection the selection button is replaced with an input field for editing the UI Title, and an <strong>X</strong>
button to unassign the collection from the UI.</p>
<p>For any collections not assigned to the UI, their select buttons are displayed in a separate section at the bottom
of the sub-panel.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Root</span></code> collection will be added and/or assigned a UI button automatically if necessary when the rig is generated.
If desired, it is possible to manually assign UI buttons to the internal <code class="docutils literal notranslate"><span class="pre">ORG</span></code>, <code class="docutils literal notranslate"><span class="pre">DEF</span></code> and <code class="docutils literal notranslate"><span class="pre">MCH</span></code> collections.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Blank rows appear much thinner in the final interface, since they don’t have to contain editing buttons, and can be
used as logical separators.</p>
</div>
</section>
</section>
<section id="actions">
<h2>Actions<a class="headerlink" href="#actions" title="Link to this heading"></a></h2>
<figure class="align-right">
<a class="reference internal image-reference" href="../../../_images/addons_rigging_rigify_metarigs_actions-list-panel.png"><img alt="../../../_images/addons_rigging_rigify_metarigs_actions-list-panel.png" src="../../../_images/addons_rigging_rigify_metarigs_actions-list-panel.png" style="width: 300px;" /></a>
</figure>
<p>The <a class="reference internal" href="../../../animation/constraints/relationship/action.html"><span class="doc">Action</span></a> constraint allows applying poses defined
by an action to bones based on the transformation of another bone. This requires adding the constraint to every
bone affected by the action, which is very tedious. For this reason, Rigify includes a system to do this
automatically through the Actions panel.</p>
<p>The panel defines a list of actions to be applied to the generated rig bones. Each action must be listed only once.</p>
<p>The list entries show the name of the action, the trigger (a bone or a corrective action driven by two others), and
a checkbox that can be used to temporarily disable applying this action to the rig. The icon at the start of the entry
is changed from an action icon to a link icon to highlight corrective actions that depend on the active normal one,
or normal actions used by the active corrective action.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Action constraints are added to the bones in such an order as to exactly reproduce the intended deformation,
assuming the actions were created (posed and keyframed) in the order listed.</p>
</div>
<section id="normal-actions">
<h3>Normal Actions<a class="headerlink" href="#normal-actions" title="Link to this heading"></a></h3>
<figure class="align-right">
<a class="reference internal image-reference" href="../../../_images/addons_rigging_rigify_metarigs_actions-normal-panel.png"><img alt="../../../_images/addons_rigging_rigify_metarigs_actions-normal-panel.png" src="../../../_images/addons_rigging_rigify_metarigs_actions-normal-panel.png" style="width: 300px;" /></a>
</figure>
<p>Normal actions are applied based on the transformation of a specific control bone from the generated rig.
They have the following properties:</p>
<dl>
<dt>Control Bone</dt><dd><p>Specifies the bone that drives the action.</p>
</dd>
<dt>Symmetrical</dt><dd><p>If the control bone has a suffix that specifies that it belongs to the left or right side, this option can
be enabled to automatically apply symmetry.</p>
<p>When enabled, left-side bones keyframed in the action will be controlled by the left-side control, and right-side
bones by the right side control. Bones that don’t have a a side suffix are assumed to belong to the center of the
character. They are rigged with two Action constraints with influence 0.5 that are controlled by each of the
control bones.</p>
</dd>
<dt>Frame Start &amp; End</dt><dd><p>Specifies the frame range of the action that will be used by the created constraints.</p>
</dd>
<dt>Target Space, Transform Channel</dt><dd><p>Specifies the coordinate space and transformation channel of the target bone that should be used.</p>
</dd>
<dt>Min, Max</dt><dd><p>Specifies the range of the transformation channel values that is mapped to the specified action frame range.</p>
</dd>
<dt>Default Frame</dt><dd><p>Shows the frame within the action that maps to the neutral value (1 for scale and 0 otherwise)
of the transformation channel, as computed from the specified range values.</p>
</dd>
</dl>
</section>
<section id="corrective-actions">
<h3>Corrective Actions<a class="headerlink" href="#corrective-actions" title="Link to this heading"></a></h3>
<figure class="align-right">
<a class="reference internal image-reference" href="../../../_images/addons_rigging_rigify_metarigs_actions-corrective-panel.png"><img alt="../../../_images/addons_rigging_rigify_metarigs_actions-corrective-panel.png" src="../../../_images/addons_rigging_rigify_metarigs_actions-corrective-panel.png" style="width: 300px;" /></a>
</figure>
<p>Corrective actions are applied based on the progress of two other actions from the list, and are used to improve
the pose when they are used together.</p>
<dl class="simple">
<dt>Frame Start &amp; End</dt><dd><p>Specifies the frame range of the action that will be used by the created constraints.</p>
</dd>
<dt>Trigger A &amp; B</dt><dd><p>Specifies the two actions that control the correction. The interface rows contain buttons to show the settings
for that action, or jump to it in the list.</p>
</dd>
</dl>
<p>The progress of the corrective action from the start to the end frame is calculated as the product of the progress
values of the two trigger actions. Thus, the start frame is applied when either of the triggers is at the start frame,
and the end frame is used when both are at their end frame.</p>
<p>Corrective actions must be below their triggers in the list, which is enforced via an implicit reorder even if violated.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Corrective actions behave in the most intuitive way when both triggers have the Default Frame equal to Start Frame.
To create a corrective action in such case:</p>
<ul class="simple">
<li><p>Create the two trigger actions, add them to the panel and generate the rig.</p></li>
<li><p>Pose your controls so that both trigger actions are fully activated to the end frame.</p></li>
<li><p>Pose and keyframe the necessary corrections in the end frame of the new action, while keying the start
frame to the neutral values.</p></li>
<li><p>Add the newly created action to the end of the list in the panel and configure its settings.</p></li>
</ul>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="rig_features.html" class="btn btn-neutral float-left" title="Generated Rig Features" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="rig_types/index.html" class="btn btn-neutral float-right" title="Rig Types" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../../copyright.html">Copyright</a> : This page is licensed under a CC-BY-SA 4.0 Int. License.
      <span class="lastupdated">Last updated on 12/17/2023.
      </span></p>
  </div>

  
<div class="footer-contribute">
   <ul>
      <li>
         <a href="https://projects.blender.org/blender/blender-manual/src/branch/main/manual/addons/rigging/rigify/metarigs.rst"
            class="fa fa-edit"> View Source</a>
      </li>
      <!-- <li>
         <a href="https://projects.blender.org/blender/blender-manual/src/branch/main/manual/addons/rigging/rigify/metarigs.rst"
            class="fa fa-edit"> Edit Page</a>
      </li> -->
      <li>
         <a href="https://projects.blender.org/blender/documentation/issues/new?template=.gitea/issue_template/bug.yaml&field:body=%2A%2APage+Information%2A%2A%0D%0AFile%3A+%60manual%2Faddons/rigging/rigify/metarigs.rst%60%0D%0ABlender+Version%3A+%604.0%60%0D%0ADocumentation+Language%3A+%60en%60%0D%0A%5BPermanent+Link%5D%28https%3A%2F%2Fdocs.blender.org%2Fmanual%2Fen%2F4.0%2Faddons/rigging/rigify/metarigs.html%29%0D%0A%0D%0A%2A%2AShort+description+of+error%2A%2A%0D%0A%5BPlease+fill+out+a+short+description+of+the+error+here%5D%0D%0A"
            class="fa fa-bug"> Report issue on this page</a>
      </li>
      <ul>
</div>


</footer>
        </div>
      </div>
    </section>
  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="document versions">
	<ul id="versionwrap" role="presentation">
		<li role="presentation">
			<span id="version-popover" class="version-btn" tabindex="0" role="button" aria-label="versions selector"
				aria-haspopup="true" aria-controls="version-vsnlist" aria-disabled="true">
				4.0
			</span>
			<div class="version-dialog" aria-hidden="true">
				<div class="version-arrow" aria-hidden="true"></div>
				<div class="version-title">Versions</div>
				<ul id="version-vsnlist" class="version-list" role="menu" aria-labelledby="version-popover"
					aria-hidden="true">
					<li role="presentation">Loading...</li>
				</ul>
			</div>
		</li>
		<li role="presentation">
			<span id="lang-popover" class="version-btn" tabindex="0" role="button" aria-label="language selector"
				aria-haspopup="true" aria-controls="version-langlist">
				 en 
			</span>
			<div class="version-dialog" aria-hidden="true">
				<div class="version-arrow" aria-hidden="true"></div>
				<div class="version-title">Languages</div>
				<ul id="version-langlist" class="version-list" role="menu" aria-labelledby="lang-popover"
					aria-hidden="true">
					<li role="presentation">Loading...</li>
				</ul>
			</div>
		</li>
		<template id="version-entry">
			<li tabindex="-1" role="presentation"><a tabindex="-1" role="menuitem"></a></li>
			<li class="selected" tabindex="-1" role="presentation"><span tabindex="-1" aria-current="page"></spanp></li>
		</template>
	</ul>
<template id="version-warning">
	<div class="admonition warning">
		<p class="first admonition-title">Note</p>
		<p class="last">
			You are not using the most up to date version of the documentation.
			<a href="#"></a> is the newest version.
		</p>
	</div>
</template>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-1418081-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-1418081-1', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>