<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Add-on Tutorial &mdash; Blender Manual</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme_overrides.css?v=8da28a04" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/version_switch.css?v=74ca2809" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="canonical" href="https://docs.blender.org/manual/en/latest/advanced/scripting/addon_tutorial.html" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=715c20a1"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/js/version_switch.js?v=5cbd935e"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Blender Manual"
          href="../../_static/opensearch.xml"/>
<link rel="alternate" hreflang="en" href="https://docs.blender.org/manual/en/latest/" />
<link rel="alternate" hreflang="ar" href="https://docs.blender.org/manual/ar/latest/" />
<link rel="alternate" hreflang="de" href="https://docs.blender.org/manual/de/latest/" />
<link rel="alternate" hreflang="es" href="https://docs.blender.org/manual/es/latest/" />
<link rel="alternate" hreflang="fi" href="https://docs.blender.org/manual/fi/latest/" />
<link rel="alternate" hreflang="fr" href="https://docs.blender.org/manual/fr/latest/" />
<link rel="alternate" hreflang="id" href="https://docs.blender.org/manual/id/latest/" />
<link rel="alternate" hreflang="it" href="https://docs.blender.org/manual/it/latest/" />
<link rel="alternate" hreflang="ja" href="https://docs.blender.org/manual/ja/latest/" />
<link rel="alternate" hreflang="ko" href="https://docs.blender.org/manual/ko/latest/" />
<link rel="alternate" hreflang="nb" href="https://docs.blender.org/manual/nb/latest/" />
<link rel="alternate" hreflang="pt" href="https://docs.blender.org/manual/pt/latest/" />
<link rel="alternate" hreflang="ru" href="https://docs.blender.org/manual/ru/latest/" />
<link rel="alternate" hreflang="sk" href="https://docs.blender.org/manual/sk/latest/" />
<link rel="alternate" hreflang="sl" href="https://docs.blender.org/manual/sl/latest/" />
<link rel="alternate" hreflang="sr" href="https://docs.blender.org/manual/sr/latest/" />
<link rel="alternate" hreflang="uk" href="https://docs.blender.org/manual/uk/latest/" />
<link rel="alternate" hreflang="vi" href="https://docs.blender.org/manual/vi/latest/" />
<link rel="alternate" hreflang="zh-Hans" href="https://docs.blender.org/manual/zh-hans/latest/" />
<link rel="alternate" hreflang="zh-Hant" href="https://docs.blender.org/manual/zh-hant/latest/" />
<link rel="alternate" hreflang="x-default" href="https://docs.blender.org/manual/en/latest/" />

    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="next" title="Application Templates" href="../app_templates.html" />
    <link rel="prev" title="Scripting &amp; Security" href="security.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Blender 4.0 Manual
              <img src="../../_static/blender-logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/about/index.html">About Blender</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/installing/index.html">Installing Blender</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/configuration/index.html">Configuring Blender</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/help.html">Help System</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Sections</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../interface/index.html">User Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../editors/index.html">Editors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scene_layout/index.html">Scenes &amp; Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modeling/index.html">Modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sculpt_paint/index.html">Sculpting &amp; Painting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../grease_pencil/index.html">Grease Pencil</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../animation/index.html">Animation &amp; Rigging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../physics/index.html">Physics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../render/index.html">Rendering</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../compositing/index.html">Compositing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../movie_clip/index.html">Motion Tracking &amp; Masking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../video_editing/index.html">Video Editing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files/index.html">Assets, Files, &amp; Data System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../addons/index.html">Add-ons</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Advanced</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../command_line/index.html">Command Line</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Scripting &amp; Extending Blender</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="security.html">Scripting &amp; Security</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Add-on Tutorial</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#intended-audience">Intended Audience</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#documentation-links">Documentation Links</a></li>
<li class="toctree-l4"><a class="reference internal" href="#what-is-an-add-on">What is an Add-on?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#your-first-add-on">Your First Add-on</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#write-the-script">Write the Script</a></li>
<li class="toctree-l5"><a class="reference internal" href="#write-the-add-on-simple">Write the Add-on (Simple)</a></li>
<li class="toctree-l5"><a class="reference internal" href="#install-the-add-on">Install the Add-on</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#your-second-add-on">Your Second Add-on</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id1">Write the Script</a></li>
<li class="toctree-l5"><a class="reference internal" href="#write-the-add-on">Write the Add-on</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#operator-property">Operator Property</a></li>
<li class="toctree-l6"><a class="reference internal" href="#menu-item">Menu Item</a></li>
<li class="toctree-l6"><a class="reference internal" href="#keymap">Keymap</a></li>
<li class="toctree-l6"><a class="reference internal" href="#bringing-it-all-together">Bringing It All Together</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#conclusions">Conclusions</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#further-reading">Further Reading</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../app_templates.html">Application Templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../keymap_editing.html">Keymap Customization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../limits.html">Working Limits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../operators.html">Operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../blender_directory_layout.html">Blender’s Directory Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendices/index.html">Appendices</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshooting/index.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/index.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../genindex.html">Manual Index</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Get Involved</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">Contribute Documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Blender 4.0 Manual</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Advanced</a></li>
          <li class="breadcrumb-item"><a href="index.html">Scripting &amp; Extending Blender</a></li>
      <li class="breadcrumb-item active">Add-on Tutorial</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="add-on-tutorial">
<h1>Add-on Tutorial<a class="headerlink" href="#add-on-tutorial" title="Link to this heading"></a></h1>
<section id="intended-audience">
<h2>Intended Audience<a class="headerlink" href="#intended-audience" title="Link to this heading"></a></h2>
<p>This tutorial is designed to help technical artists or developers learn to extend Blender.
An understanding of the basics of Python is expected for those working through this tutorial.</p>
<section id="prerequisites">
<h3>Prerequisites<a class="headerlink" href="#prerequisites" title="Link to this heading"></a></h3>
<p>Before going through the tutorial you should…</p>
<ul class="simple">
<li><p>Be familiar with the basics of working in Blender.</p></li>
<li><p>Know how to run a script in Blender’s Text editor.</p></li>
<li><p>Have an understanding of Python primitive types (integer, Boolean, string, list, tuple, dictionary, and set).</p></li>
<li><p>Be familiar with the concept of Python modules.</p></li>
<li><p>Have a basic understanding of classes (object orientation) in Python.</p></li>
</ul>
<p>Suggested reading before starting this tutorial.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://finderiko.com/python-book">Dive Into Python</a> sections (1, 2, 3, 4, and 7).</p></li>
<li><p><a class="reference external" href="https://docs.blender.org/api/current/info_quickstart.html">Blender API Quickstart</a>
to help become familiar with Blender/Python basics.</p></li>
</ul>
<p>To best troubleshoot any error message Python prints while writing scripts, you run Blender from a terminal.
See <a class="reference external" href="https://docs.blender.org/api/current/info_tips_and_tricks.html#use-the-terminal">Use The Terminal</a>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can enable <a class="reference internal" href="../../editors/preferences/interface.html#prefs-interface-dev-extras"><span class="std std-ref">Developer Extras</span></a>
in the preferences to enable features that make developing add-ons easier.</p>
</div>
</section>
</section>
<section id="documentation-links">
<h2>Documentation Links<a class="headerlink" href="#documentation-links" title="Link to this heading"></a></h2>
<p>While going through the tutorial, you may want to look into our reference documentation.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.blender.org/api/current/info_overview.html">Blender API Overview</a>:
This document is rather detailed but helpful if you want to know more on a topic.</p></li>
<li><p><a class="reference external" href="https://docs.blender.org/api/4.0/bpy.context.html#module-bpy.context" title="(in Blender 4.0.3 Release Candidate Python API v4.0)"><code class="docutils literal notranslate"><span class="pre">bpy.context</span></code></a> API reference –
Handy to have a list of available items your script may operate on.</p></li>
<li><p><a class="reference external" href="https://docs.blender.org/api/4.0/bpy.types.Operator.html#bpy.types.Operator" title="(in Blender 4.0.3 Release Candidate Python API v4.0)"><code class="docutils literal notranslate"><span class="pre">bpy.types.Operator</span></code></a> –
The following add-ons define operators, these docs give details and more examples of operators.</p></li>
</ul>
</section>
<section id="what-is-an-add-on">
<h2>What is an Add-on?<a class="headerlink" href="#what-is-an-add-on" title="Link to this heading"></a></h2>
<p>An add-on is simply a Python module with some additional requirements so Blender
can display it in a list with useful information.</p>
<p>To give an example, here is the simplest possible add-on:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">bl_info</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;My Test Add-on&quot;</span><span class="p">,</span>
    <span class="s2">&quot;blender&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;Object&quot;</span><span class="p">,</span>
<span class="p">}</span>
<span class="k">def</span> <span class="nf">register</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello World&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">unregister</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Goodbye World&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">bl_info</span></code></dt><dd><p>is a dictionary containing add-on metadata such as the title,
version and author to be displayed in the Preferences add-on list.
It also specifies the minimum Blender version required to run the script;
older versions won’t display the add-on in the list.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">register</span></code></dt><dd><p>is a function which only runs when enabling the add-on,
this means the module can be loaded without activating the add-on.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unregister</span></code></dt><dd><p>is a function to unload anything setup by <code class="docutils literal notranslate"><span class="pre">register</span></code>,
this is called when the add-on is disabled.</p>
</dd>
</dl>
<p>Notice this add-on does not do anything related to Blender
(the <code class="xref py py-mod docutils literal notranslate"><span class="pre">blender_api:bpy</span></code> module is not imported for example).</p>
<p>This is a contrived example of an add-on that serves to illustrate the point
that the base requirements of an add-on are simple.</p>
<p>An add-on will typically register operators, panels, menu items, etc,
but it’s worth noting that <em>any</em> script can do this,
when executed from the Text editor or even the interactive console –
there is nothing inherently different about an add-on that allows it to integrate with Blender,
such functionality is just provided by the <code class="xref py py-mod docutils literal notranslate"><span class="pre">blender_api:bpy</span></code> module for any script to access.</p>
<p>So an add-on is just a way to encapsulate a Python module in a way a user can easily utilize.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Running this script within the Text editor won’t print anything,
to see the output it must be installed through the Preferences.
Messages will be printed when enabling and disabling.</p>
</div>
</section>
<section id="your-first-add-on">
<h2>Your First Add-on<a class="headerlink" href="#your-first-add-on" title="Link to this heading"></a></h2>
<p>The simplest possible add-on above is useful as an example but not much else.
This next add-on is simple but shows how to integrate a script into Blender using an <code class="docutils literal notranslate"><span class="pre">Operator</span></code>
which is the typical way to define a tool accessed from menus, buttons and keyboard shortcuts.</p>
<p>For the first example we will make a script that simply moves all objects in a scene.</p>
<section id="write-the-script">
<h3>Write the Script<a class="headerlink" href="#write-the-script" title="Link to this heading"></a></h3>
<p>Add the following script to the Text editor in Blender:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">bpy</span>

<span class="n">scene</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span>
<span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">scene</span><span class="o">.</span><span class="n">objects</span><span class="p">:</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="mf">1.0</span>
</pre></div>
</div>
<p>Click the <a class="reference internal" href="../../editors/text_editor.html#editors-text-run-script"><span class="std std-ref">Run Script button</span></a>,
all objects in the active scene are moved by 1.0 unit.</p>
</section>
<section id="write-the-add-on-simple">
<span id="advanced-scripting-write-the-add-on-simple"></span><h3>Write the Add-on (Simple)<a class="headerlink" href="#write-the-add-on-simple" title="Link to this heading"></a></h3>
<p>This add-on takes the body of the script above, and adds it to an operator’s <code class="docutils literal notranslate"><span class="pre">execute()</span></code> function.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">bl_info</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Move X Axis&quot;</span><span class="p">,</span>
    <span class="s2">&quot;blender&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;Object&quot;</span><span class="p">,</span>
<span class="p">}</span>

<span class="kn">import</span> <span class="nn">bpy</span>


<span class="k">class</span> <span class="nc">ObjectMoveX</span><span class="p">(</span><span class="n">bpy</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Operator</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;My Object Moving Script&quot;&quot;&quot;</span>      <span class="c1"># Use this as a tooltip for menu items and buttons.</span>
    <span class="n">bl_idname</span> <span class="o">=</span> <span class="s2">&quot;object.move_x&quot;</span>        <span class="c1"># Unique identifier for buttons and menu items to reference.</span>
    <span class="n">bl_label</span> <span class="o">=</span> <span class="s2">&quot;Move X by One&quot;</span>         <span class="c1"># Display name in the interface.</span>
    <span class="n">bl_options</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;REGISTER&#39;</span><span class="p">,</span> <span class="s1">&#39;UNDO&#39;</span><span class="p">}</span>  <span class="c1"># Enable undo for the operator.</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>        <span class="c1"># execute() is called when running the operator.</span>

        <span class="c1"># The original script</span>
        <span class="n">scene</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">scene</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">scene</span><span class="o">.</span><span class="n">objects</span><span class="p">:</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="mf">1.0</span>

        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;FINISHED&#39;</span><span class="p">}</span>            <span class="c1"># Lets Blender know the operator finished successfully.</span>

<span class="k">def</span> <span class="nf">menu_func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">operator</span><span class="p">(</span><span class="n">ObjectMoveX</span><span class="o">.</span><span class="n">bl_idname</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">register</span><span class="p">():</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">register_class</span><span class="p">(</span><span class="n">ObjectMoveX</span><span class="p">)</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">VIEW3D_MT_object</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">menu_func</span><span class="p">)</span>  <span class="c1"># Adds the new operator to an existing menu.</span>

<span class="k">def</span> <span class="nf">unregister</span><span class="p">():</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">unregister_class</span><span class="p">(</span><span class="n">ObjectMoveX</span><span class="p">)</span>


<span class="c1"># This allows you to run the script directly from Blender&#39;s Text editor</span>
<span class="c1"># to test the add-on without having to install it.</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">register</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">bl_info</span></code> is split across multiple lines, this is just a style convention used to more easily add items.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Rather than using <code class="docutils literal notranslate"><span class="pre">bpy.context.scene</span></code>, we use the <code class="docutils literal notranslate"><span class="pre">context.scene</span></code> argument passed to <code class="docutils literal notranslate"><span class="pre">execute()</span></code>.
In most cases these will be the same. However in some cases, operators will be passed a custom context
so script authors should prefer the <code class="docutils literal notranslate"><span class="pre">context</span></code> argument passed to operators.</p>
</div>
<p>To test the script, you can copy and paste it into Blender’s Text editor and run it.
This will execute the script directly and call register immediately.</p>
<p>However running the script won’t move any objects. For this, you need to execute the newly registered operator.</p>
<figure class="align-default" id="id2">
<img alt="../../_images/advanced_scripting_addon-tutorial_operator-search-menu.png" src="../../_images/advanced_scripting_addon-tutorial_operator-search-menu.png" />
<figcaption>
<p><span class="caption-text">Operator Search menu.</span><a class="headerlink" href="#id2" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>Open the <a class="reference internal" href="../../interface/controls/templates/operator_search.html#bpy-ops-wm-search-operator"><span class="std std-ref">Operator Search</span></a> menu
and type in “Move X by One” (the <code class="docutils literal notranslate"><span class="pre">bl_label</span></code>), then <kbd class="kbd docutils literal notranslate">Return</kbd>.</p>
<p>The objects should move as before.</p>
<p><em>Keep this add-on open in Blender for the next step - Installing.</em></p>
</section>
<section id="install-the-add-on">
<h3>Install the Add-on<a class="headerlink" href="#install-the-add-on" title="Link to this heading"></a></h3>
<p>Once you have your add-on within in Blender’s Text editor,
you will want to be able to install it so it can be enabled in the Preferences to load on startup.</p>
<p>Even though the add-on above is a test, let’s go through the steps anyway so you know how to do it for later.</p>
<p>To install the Blender text as an add-on, you will first have to save it on drive. Take care to obey the naming
restrictions that apply to Python modules and end with a <code class="docutils literal notranslate"><span class="pre">.py</span></code> extension.</p>
<p>Once the file is on drive, you can install it as you would for an add-on downloaded online.</p>
<p>Open the <span class="menuselection">Preferences ‣ Add-ons ‣ Install…</span> and select the file.</p>
<p>Now the add-on will be listed and you can enable it by pressing the checkbox,
if you want it to be enabled on restart, press <em>Save as Default</em>. The operator
can be run in the same way as described in the <a class="reference internal" href="#advanced-scripting-write-the-add-on-simple"><span class="std std-ref">previous section</span></a>.</p>
<p>When the add-on is enabled, Blender executes the code and runs the <code class="docutils literal notranslate"><span class="pre">register()</span></code> function.
When the add-on is disabled, Blender runs the <code class="docutils literal notranslate"><span class="pre">unregister()</span></code> function.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The destination of the add-on depends on your Blender configuration.
When installing an add-on the source and destination paths are printed in the console.
You can also find add-on path locations by running this in the Python Console:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">addon_utils</span>
<span class="nb">print</span><span class="p">(</span><span class="n">addon_utils</span><span class="o">.</span><span class="n">paths</span><span class="p">())</span>
</pre></div>
</div>
<p>More is written on this topic here:
<a class="reference internal" href="../blender_directory_layout.html#blender-directory-layout"><span class="std std-ref">Directory Layout</span></a>.</p>
</div>
</section>
</section>
<section id="your-second-add-on">
<h2>Your Second Add-on<a class="headerlink" href="#your-second-add-on" title="Link to this heading"></a></h2>
<p>For our second add-on, we will focus on object instancing – this is – to make linked
copies of an object in a similar way to what you may have seen with the Array modifier.</p>
<section id="id1">
<h3>Write the Script<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<p>As before, first we will start with a script, develop it, then convert it into an add-on.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">bpy</span>
<span class="kn">from</span> <span class="nn">bpy</span> <span class="kn">import</span> <span class="n">context</span>

<span class="c1"># Get the current scene</span>
<span class="n">scene</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">scene</span>

<span class="c1"># Get the 3D cursor location</span>
<span class="n">cursor</span> <span class="o">=</span> <span class="n">scene</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">location</span>

<span class="c1"># Get the active object (assume we have one)</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">active_object</span>

<span class="c1"># Now make a copy of the object</span>
<span class="n">obj_new</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="c1"># The new object has to be added to a collection in the scene</span>
<span class="n">scene</span><span class="o">.</span><span class="n">collection</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">obj_new</span><span class="p">)</span>

<span class="c1"># Now we can place the object</span>
<span class="n">obj_new</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="n">cursor</span>
</pre></div>
</div>
<p>Now try copying this script into Blender and run it on the default Cube.
Make sure you click to move the 3D cursor before running as the duplicate will appear at the cursor’s location.</p>
<p>After running, notice that when you go into <em>Edit Mode</em> to change the Cube – all of the copies change.
In Blender, this is known as <em>Linked Duplicates</em>.</p>
<p>Next, we’re going to do this in a loop, to make an array of objects between the active object and the cursor.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">bpy</span>
<span class="kn">from</span> <span class="nn">bpy</span> <span class="kn">import</span> <span class="n">context</span>

<span class="n">scene</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">scene</span>
<span class="n">cursor</span> <span class="o">=</span> <span class="n">scene</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">location</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">active_object</span>

<span class="c1"># Use a fixed value for now, eventually make this user adjustable</span>
<span class="n">total</span> <span class="o">=</span> <span class="mi">10</span>

<span class="c1"># Add &#39;total&#39; objects into the scene</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">total</span><span class="p">):</span>
    <span class="n">obj_new</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">scene</span><span class="o">.</span><span class="n">collection</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">obj_new</span><span class="p">)</span>

    <span class="c1"># Now place the object in between the cursor</span>
    <span class="c1"># and the active object based on &#39;i&#39;</span>
    <span class="n">factor</span> <span class="o">=</span> <span class="n">i</span> <span class="o">/</span> <span class="n">total</span>
    <span class="n">obj_new</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">location</span> <span class="o">*</span> <span class="n">factor</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">cursor</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">factor</span><span class="p">))</span>
</pre></div>
</div>
<p>Try running this script with the active object and the cursor spaced apart to see the result.</p>
<p>With this script you’ll notice we’re doing some math with the object location and cursor,
this works because both are 3D <a class="reference external" href="https://docs.blender.org/api/4.0/mathutils.html#mathutils.Vector" title="(in Blender 4.0.3 Release Candidate Python API v4.0)"><code class="docutils literal notranslate"><span class="pre">mathutils.Vector</span></code></a> instances,
a convenient class provided by the <a class="reference external" href="https://docs.blender.org/api/4.0/mathutils.html#module-mathutils" title="(in Blender 4.0.3 Release Candidate Python API v4.0)"><code class="docutils literal notranslate"><span class="pre">mathutils</span></code></a> module which
allows vectors to be multiplied by numbers and matrices.</p>
<p>If you are interested in this area, read into <a class="reference external" href="https://docs.blender.org/api/4.0/mathutils.html#mathutils.Vector" title="(in Blender 4.0.3 Release Candidate Python API v4.0)"><code class="docutils literal notranslate"><span class="pre">mathutils.Vector</span></code></a>
– there are many handy utility functions such as getting the angle between vectors,
cross product, dot products as well as more advanced functions in <a class="reference external" href="https://docs.blender.org/api/4.0/mathutils.geometry.html#module-mathutils.geometry" title="(in Blender 4.0.3 Release Candidate Python API v4.0)"><code class="docutils literal notranslate"><span class="pre">mathutils.geometry</span></code></a>
such as Bézier spline interpolation and ray-triangle intersection.</p>
<p>For now we will focus on making this script an add-on, but it’s good to know that this
3D math module is available and can help you with more advanced functionality later on.</p>
</section>
<section id="write-the-add-on">
<h3>Write the Add-on<a class="headerlink" href="#write-the-add-on" title="Link to this heading"></a></h3>
<p>The first step is to convert the script as-is into an add-on:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">bl_info</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Cursor Array&quot;</span><span class="p">,</span>
    <span class="s2">&quot;blender&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;Object&quot;</span><span class="p">,</span>
<span class="p">}</span>

<span class="kn">import</span> <span class="nn">bpy</span>


<span class="k">class</span> <span class="nc">ObjectCursorArray</span><span class="p">(</span><span class="n">bpy</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Operator</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Object Cursor Array&quot;&quot;&quot;</span>
    <span class="n">bl_idname</span> <span class="o">=</span> <span class="s2">&quot;object.cursor_array&quot;</span>
    <span class="n">bl_label</span> <span class="o">=</span> <span class="s2">&quot;Cursor Array&quot;</span>
    <span class="n">bl_options</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;REGISTER&#39;</span><span class="p">,</span> <span class="s1">&#39;UNDO&#39;</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="n">scene</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">scene</span>
        <span class="n">cursor</span> <span class="o">=</span> <span class="n">scene</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">location</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">active_object</span>

        <span class="n">total</span> <span class="o">=</span> <span class="mi">10</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">total</span><span class="p">):</span>
            <span class="n">obj_new</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">scene</span><span class="o">.</span><span class="n">collection</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">obj_new</span><span class="p">)</span>

            <span class="n">factor</span> <span class="o">=</span> <span class="n">i</span> <span class="o">/</span> <span class="n">total</span>
            <span class="n">obj_new</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">location</span> <span class="o">*</span> <span class="n">factor</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">cursor</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">factor</span><span class="p">))</span>

        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;FINISHED&#39;</span><span class="p">}</span>

<span class="k">def</span> <span class="nf">register</span><span class="p">():</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">register_class</span><span class="p">(</span><span class="n">ObjectCursorArray</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">unregister</span><span class="p">():</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">unregister_class</span><span class="p">(</span><span class="n">ObjectCursorArray</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">register</span><span class="p">()</span>
</pre></div>
</div>
<p>Everything here has been covered in the previous steps, you may want to try run
the add-on still and consider what could be done to make it more useful.</p>
<p>The two of the most obvious missing things are – having the total fixed at 10,
and having to access the operator with <a class="reference internal" href="../../interface/controls/templates/operator_search.html"><span class="doc">Search</span></a> is not very convenient.</p>
<p>Both these additions are explained next, with the final script afterwards.</p>
<section id="operator-property">
<h4>Operator Property<a class="headerlink" href="#operator-property" title="Link to this heading"></a></h4>
<p>There are a variety of property types that are used for tool settings, common property types include:
int, float, vector, color, Boolean and string.</p>
<p>These properties are handled differently to typical Python class attributes
because Blender needs to display them in the interface,
store their settings in keymaps and keep settings for reuse.</p>
<p>While this is handled in a fairly Pythonic way, be mindful that you are in fact defining tool settings that
are loaded into Blender and accessed by other parts of Blender, outside of Python.</p>
<p>To get rid of the literal 10 for <code class="docutils literal notranslate"><span class="pre">total</span></code>, we’ll use an operator property.
Operator properties are defined via bpy.props module, this is added to the class body:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># moved assignment from execute() to the body of the class...</span>
<span class="n">total</span><span class="p">:</span> <span class="n">bpy</span><span class="o">.</span><span class="n">props</span><span class="o">.</span><span class="n">IntProperty</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Steps&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

<span class="c1"># and this is accessed on the class</span>
<span class="c1"># instance within the execute() function as...</span>
<span class="bp">self</span><span class="o">.</span><span class="n">total</span>
</pre></div>
</div>
<p>These properties from <a class="reference external" href="https://docs.blender.org/api/4.0/bpy.props.html#module-bpy.props" title="(in Blender 4.0.3 Release Candidate Python API v4.0)"><code class="docutils literal notranslate"><span class="pre">bpy.props</span></code></a> are handled specially by Blender
when the class is registered so they display as buttons in the user interface.
There are many arguments you can pass to properties to set limits,
change the default and display a tooltip.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://docs.blender.org/api/4.0/bpy.props.html#bpy.props.IntProperty" title="(in Blender 4.0.3 Release Candidate Python API v4.0)"><code class="docutils literal notranslate"><span class="pre">bpy.props.IntProperty()</span></code></a></p>
</div>
<p>This document doesn’t go into details about using other property types.
However, the link above includes examples of more advanced property usage.</p>
</section>
<section id="menu-item">
<h4>Menu Item<a class="headerlink" href="#menu-item" title="Link to this heading"></a></h4>
<p>Add-ons can add to the user interface of existing panels, headers and menus defined in Python.</p>
<p>For this example we’ll add to an existing menu.</p>
<figure class="align-default" id="id3">
<img alt="../../_images/advanced_scripting_addon-tutorial_menu-id.png" src="../../_images/advanced_scripting_addon-tutorial_menu-id.png" />
<figcaption>
<p><span class="caption-text">Menu Identifier.</span><a class="headerlink" href="#id3" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>To find the identifier of a menu, first enable <em>Python Tooltips</em> in the preferences.
Then you can hover your mouse over the menu item and the identifier is displayed.</p>
<p>The method used for adding a menu item is to append a draw function into an existing class:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">menu_func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">operator</span><span class="p">(</span><span class="n">ObjectCursorArray</span><span class="o">.</span><span class="n">bl_idname</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">register</span><span class="p">():</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">register_class</span><span class="p">(</span><span class="n">ObjectCursorArray</span><span class="p">)</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">VIEW3D_MT_object</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">menu_func</span><span class="p">)</span>
</pre></div>
</div>
<p>For docs on extending menus, see: <a class="reference external" href="https://docs.blender.org/api/4.0/bpy.types.Menu.html#bpy.types.Menu" title="(in Blender 4.0.3 Release Candidate Python API v4.0)"><code class="docutils literal notranslate"><span class="pre">bpy.types.Menu</span></code></a>.</p>
</section>
<section id="keymap">
<h4>Keymap<a class="headerlink" href="#keymap" title="Link to this heading"></a></h4>
<p>In Blender, add-ons have their own keymaps so as not to interfere with Blender’s built-in keymaps.</p>
<p>In the example below, a new object mode <a class="reference external" href="https://docs.blender.org/api/4.0/bpy.types.KeyMap.html#bpy.types.KeyMap" title="(in Blender 4.0.3 Release Candidate Python API v4.0)"><code class="docutils literal notranslate"><span class="pre">bpy.types.KeyMap</span></code></a> is added,
then a <a class="reference external" href="https://docs.blender.org/api/4.0/bpy.types.KeyMapItem.html#bpy.types.KeyMapItem" title="(in Blender 4.0.3 Release Candidate Python API v4.0)"><code class="docutils literal notranslate"><span class="pre">bpy.types.KeyMapItem</span></code></a> is added to the keymap which references
our newly added operator, using <kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">Shift</kbd>-<kbd class="kbd docutils literal notranslate">Ctrl</kbd>-<kbd class="kbd docutils literal notranslate">T</kbd></kbd> as the key shortcut to activate it.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># store keymaps here to access after registration</span>
<span class="n">addon_keymaps</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">def</span> <span class="nf">register</span><span class="p">():</span>

    <span class="c1"># handle the keymap</span>
    <span class="n">wm</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">window_manager</span>
    <span class="n">km</span> <span class="o">=</span> <span class="n">wm</span><span class="o">.</span><span class="n">keyconfigs</span><span class="o">.</span><span class="n">addon</span><span class="o">.</span><span class="n">keymaps</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Object Mode&#39;</span><span class="p">,</span> <span class="n">space_type</span><span class="o">=</span><span class="s1">&#39;EMPTY&#39;</span><span class="p">)</span>

    <span class="n">kmi</span> <span class="o">=</span> <span class="n">km</span><span class="o">.</span><span class="n">keymap_items</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">ObjectCursorArray</span><span class="o">.</span><span class="n">bl_idname</span><span class="p">,</span> <span class="s1">&#39;T&#39;</span><span class="p">,</span> <span class="s1">&#39;PRESS&#39;</span><span class="p">,</span> <span class="n">ctrl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">shift</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">kmi</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">total</span> <span class="o">=</span> <span class="mi">4</span>

    <span class="n">addon_keymaps</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">km</span><span class="p">,</span> <span class="n">kmi</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">unregister</span><span class="p">():</span>

    <span class="c1"># handle the keymap</span>
    <span class="k">for</span> <span class="n">km</span><span class="p">,</span> <span class="n">kmi</span> <span class="ow">in</span> <span class="n">addon_keymaps</span><span class="p">:</span>
        <span class="n">km</span><span class="o">.</span><span class="n">keymap_items</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">kmi</span><span class="p">)</span>
    <span class="n">addon_keymaps</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</pre></div>
</div>
<p>Notice how the keymap item can have a <code class="docutils literal notranslate"><span class="pre">total</span></code> setting different than the default set by the operator,
this allows you to have multiple keys accessing the same operator with different settings.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>While <kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">Shift</kbd>-<kbd class="kbd docutils literal notranslate">Ctrl</kbd>-<kbd class="kbd docutils literal notranslate">T</kbd></kbd> is not a default Blender key shortcut,
it is hard to make sure add-ons will not overwrite each other’s keymaps.
Thus at least take care when assigning keys that they do not
conflict with important functionality of Blender
(see also <a class="reference internal" href="../../addons/development/is_key_free.html"><span class="doc">Is Key Free</span></a>).</p>
</div>
<p>For API documentation on the functions listed above, see:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.blender.org/api/4.0/bpy.types.KeyMaps.html#bpy.types.KeyMaps.new" title="(in Blender 4.0.3 Release Candidate Python API v4.0)"><code class="docutils literal notranslate"><span class="pre">bpy.types.KeyMaps.new()</span></code></a></p></li>
<li><p><a class="reference external" href="https://docs.blender.org/api/4.0/bpy.types.KeyMap.html#bpy.types.KeyMap" title="(in Blender 4.0.3 Release Candidate Python API v4.0)"><code class="docutils literal notranslate"><span class="pre">bpy.types.KeyMap</span></code></a></p></li>
<li><p><a class="reference external" href="https://docs.blender.org/api/4.0/bpy.types.KeyMapItems.html#bpy.types.KeyMapItems.new" title="(in Blender 4.0.3 Release Candidate Python API v4.0)"><code class="docutils literal notranslate"><span class="pre">bpy.types.KeyMapItems.new()</span></code></a></p></li>
<li><p><a class="reference external" href="https://docs.blender.org/api/4.0/bpy.types.KeyMapItem.html#bpy.types.KeyMapItem" title="(in Blender 4.0.3 Release Candidate Python API v4.0)"><code class="docutils literal notranslate"><span class="pre">bpy.types.KeyMapItem</span></code></a></p></li>
</ul>
</section>
<section id="bringing-it-all-together">
<h4>Bringing It All Together<a class="headerlink" href="#bringing-it-all-together" title="Link to this heading"></a></h4>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">bl_info</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Cursor Array&quot;</span><span class="p">,</span>
    <span class="s2">&quot;blender&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;Object&quot;</span><span class="p">,</span>
<span class="p">}</span>

<span class="kn">import</span> <span class="nn">bpy</span>


<span class="k">class</span> <span class="nc">ObjectCursorArray</span><span class="p">(</span><span class="n">bpy</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Operator</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Object Cursor Array&quot;&quot;&quot;</span>
    <span class="n">bl_idname</span> <span class="o">=</span> <span class="s2">&quot;object.cursor_array&quot;</span>
    <span class="n">bl_label</span> <span class="o">=</span> <span class="s2">&quot;Cursor Array&quot;</span>
    <span class="n">bl_options</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;REGISTER&#39;</span><span class="p">,</span> <span class="s1">&#39;UNDO&#39;</span><span class="p">}</span>

    <span class="n">total</span><span class="p">:</span> <span class="n">bpy</span><span class="o">.</span><span class="n">props</span><span class="o">.</span><span class="n">IntProperty</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Steps&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="n">scene</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">scene</span>
        <span class="n">cursor</span> <span class="o">=</span> <span class="n">scene</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">location</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">active_object</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">total</span><span class="p">):</span>
            <span class="n">obj_new</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">scene</span><span class="o">.</span><span class="n">collection</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">obj_new</span><span class="p">)</span>

            <span class="n">factor</span> <span class="o">=</span> <span class="n">i</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">total</span>
            <span class="n">obj_new</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">location</span> <span class="o">*</span> <span class="n">factor</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">cursor</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">factor</span><span class="p">))</span>

        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;FINISHED&#39;</span><span class="p">}</span>


<span class="k">def</span> <span class="nf">menu_func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">operator</span><span class="p">(</span><span class="n">ObjectCursorArray</span><span class="o">.</span><span class="n">bl_idname</span><span class="p">)</span>

<span class="c1"># store keymaps here to access after registration</span>
<span class="n">addon_keymaps</span> <span class="o">=</span> <span class="p">[]</span>


<span class="k">def</span> <span class="nf">register</span><span class="p">():</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">register_class</span><span class="p">(</span><span class="n">ObjectCursorArray</span><span class="p">)</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">VIEW3D_MT_object</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">menu_func</span><span class="p">)</span>

    <span class="c1"># handle the keymap</span>
    <span class="n">wm</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">window_manager</span>
    <span class="c1"># Note that in background mode (no GUI available), keyconfigs are not available either,</span>
    <span class="c1"># so we have to check this to avoid nasty errors in background case.</span>
    <span class="n">kc</span> <span class="o">=</span> <span class="n">wm</span><span class="o">.</span><span class="n">keyconfigs</span><span class="o">.</span><span class="n">addon</span>
    <span class="k">if</span> <span class="n">kc</span><span class="p">:</span>
        <span class="n">km</span> <span class="o">=</span> <span class="n">wm</span><span class="o">.</span><span class="n">keyconfigs</span><span class="o">.</span><span class="n">addon</span><span class="o">.</span><span class="n">keymaps</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Object Mode&#39;</span><span class="p">,</span> <span class="n">space_type</span><span class="o">=</span><span class="s1">&#39;EMPTY&#39;</span><span class="p">)</span>
        <span class="n">kmi</span> <span class="o">=</span> <span class="n">km</span><span class="o">.</span><span class="n">keymap_items</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">ObjectCursorArray</span><span class="o">.</span><span class="n">bl_idname</span><span class="p">,</span> <span class="s1">&#39;T&#39;</span><span class="p">,</span> <span class="s1">&#39;PRESS&#39;</span><span class="p">,</span> <span class="n">ctrl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">shift</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">kmi</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">total</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="n">addon_keymaps</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">km</span><span class="p">,</span> <span class="n">kmi</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">unregister</span><span class="p">():</span>
    <span class="c1"># Note: when unregistering, it&#39;s usually good practice to do it in reverse order you registered.</span>
    <span class="c1"># Can avoid strange issues like keymap still referring to operators already unregistered...</span>
    <span class="c1"># handle the keymap</span>
    <span class="k">for</span> <span class="n">km</span><span class="p">,</span> <span class="n">kmi</span> <span class="ow">in</span> <span class="n">addon_keymaps</span><span class="p">:</span>
        <span class="n">km</span><span class="o">.</span><span class="n">keymap_items</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">kmi</span><span class="p">)</span>
    <span class="n">addon_keymaps</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="n">bpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">unregister_class</span><span class="p">(</span><span class="n">ObjectCursorArray</span><span class="p">)</span>
    <span class="n">bpy</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">VIEW3D_MT_object</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">menu_func</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">register</span><span class="p">()</span>
</pre></div>
</div>
<figure class="align-default" id="id4">
<img alt="../../_images/advanced_scripting_addon-tutorial_in-menu.png" src="../../_images/advanced_scripting_addon-tutorial_in-menu.png" />
<figcaption>
<p><span class="caption-text">In the menu.</span><a class="headerlink" href="#id4" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>Run the script (or save it and add it through the Preferences like before) and it will appear in the <em>Object</em> menu.</p>
<figure class="align-default" id="id5">
<img alt="../../_images/advanced_scripting_addon-tutorial_op-prop.png" src="../../_images/advanced_scripting_addon-tutorial_op-prop.png" />
<figcaption>
<p><span class="caption-text">Operator Property.</span><a class="headerlink" href="#id5" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>After selecting it from the menu, you can choose how many instances of the cube you want create.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Directly executing the script multiple times will add the menu each time too.
While not useful behavior, there is nothing to worry about since add-ons will not
register themselves multiple times when enabled through the Preferences.</p>
</div>
</section>
</section>
</section>
<section id="conclusions">
<h2>Conclusions<a class="headerlink" href="#conclusions" title="Link to this heading"></a></h2>
<p>Add-ons can encapsulate certain functionality neatly for writing tools
to improve your workflow or for writing utilities for others to use.</p>
<p>While there are limits to what Python can do within Blender,
there is certainly a lot that can be achieved without having to dive into Blender’s C/C++ code.</p>
<p>The example given in the tutorial is limited, but shows the Blender API used
for common tasks that you can expand on to write your own tools.</p>
<section id="further-reading">
<h3>Further Reading<a class="headerlink" href="#further-reading" title="Link to this heading"></a></h3>
<p>Blender comes with commented templates which are accessible from the Text editor’s header.
If you have specific areas you want to see example code for, this is a good place to start.</p>
<p>Here are some sites you might like to check on after completing this tutorial.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.blender.org/api/current/info_overview.html">Blender/Python API Overview</a> –
For more background details on Blender/Python integration.</p></li>
<li><p><a class="reference external" href="https://runestone.academy/ns/books/published/thinkcspy/index.html">How to Think Like a Computer Scientist</a> –
Great info for those who are still learning Python.</p></li>
<li><p><a class="reference external" href="https://wiki.blender.org">Blender Development (Wiki)</a> –
Blender Development, general information and helpful links.</p></li>
<li><p><a class="reference external" href="https://devtalk.blender.org/tag/python">DevTalk</a> –
Forum where people ask Python development questions.</p></li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="security.html" class="btn btn-neutral float-left" title="Scripting &amp; Security" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../app_templates.html" class="btn btn-neutral float-right" title="Application Templates" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../copyright.html">Copyright</a> : This page is licensed under a CC-BY-SA 4.0 Int. License.
      <span class="lastupdated">Last updated on 12/17/2023.
      </span></p>
  </div>

  
<div class="footer-contribute">
   <ul>
      <li>
         <a href="https://projects.blender.org/blender/blender-manual/src/branch/main/manual/advanced/scripting/addon_tutorial.rst"
            class="fa fa-edit"> View Source</a>
      </li>
      <!-- <li>
         <a href="https://projects.blender.org/blender/blender-manual/src/branch/main/manual/advanced/scripting/addon_tutorial.rst"
            class="fa fa-edit"> Edit Page</a>
      </li> -->
      <li>
         <a href="https://projects.blender.org/blender/documentation/issues/new?template=.gitea/issue_template/bug.yaml&field:body=%2A%2APage+Information%2A%2A%0D%0AFile%3A+%60manual%2Fadvanced/scripting/addon_tutorial.rst%60%0D%0ABlender+Version%3A+%604.0%60%0D%0ADocumentation+Language%3A+%60en%60%0D%0A%5BPermanent+Link%5D%28https%3A%2F%2Fdocs.blender.org%2Fmanual%2Fen%2F4.0%2Fadvanced/scripting/addon_tutorial.html%29%0D%0A%0D%0A%2A%2AShort+description+of+error%2A%2A%0D%0A%5BPlease+fill+out+a+short+description+of+the+error+here%5D%0D%0A"
            class="fa fa-bug"> Report issue on this page</a>
      </li>
      <ul>
</div>


</footer>
        </div>
      </div>
    </section>
  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="document versions">
	<ul id="versionwrap" role="presentation">
		<li role="presentation">
			<span id="version-popover" class="version-btn" tabindex="0" role="button" aria-label="versions selector"
				aria-haspopup="true" aria-controls="version-vsnlist" aria-disabled="true">
				4.0
			</span>
			<div class="version-dialog" aria-hidden="true">
				<div class="version-arrow" aria-hidden="true"></div>
				<div class="version-title">Versions</div>
				<ul id="version-vsnlist" class="version-list" role="menu" aria-labelledby="version-popover"
					aria-hidden="true">
					<li role="presentation">Loading...</li>
				</ul>
			</div>
		</li>
		<li role="presentation">
			<span id="lang-popover" class="version-btn" tabindex="0" role="button" aria-label="language selector"
				aria-haspopup="true" aria-controls="version-langlist">
				 en 
			</span>
			<div class="version-dialog" aria-hidden="true">
				<div class="version-arrow" aria-hidden="true"></div>
				<div class="version-title">Languages</div>
				<ul id="version-langlist" class="version-list" role="menu" aria-labelledby="lang-popover"
					aria-hidden="true">
					<li role="presentation">Loading...</li>
				</ul>
			</div>
		</li>
		<template id="version-entry">
			<li tabindex="-1" role="presentation"><a tabindex="-1" role="menuitem"></a></li>
			<li class="selected" tabindex="-1" role="presentation"><span tabindex="-1" aria-current="page"></spanp></li>
		</template>
	</ul>
<template id="version-warning">
	<div class="admonition warning">
		<p class="first admonition-title">Note</p>
		<p class="last">
			You are not using the most up to date version of the documentation.
			<a href="#"></a> is the newest version.
		</p>
	</div>
</template>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-1418081-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-1418081-1', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>