<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GPU Compositor &mdash; Blender Manual</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme_overrides.css?v=8da28a04" />
      <link rel="stylesheet" type="text/css" href="../_static/css/version_switch.css?v=74ca2809" />

  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="canonical" href="https://docs.blender.org/manual/en/latest/compositing/realtime_compositor.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=715c20a1"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/js/version_switch.js?v=5cbd935e"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Blender Manual"
          href="../_static/opensearch.xml"/>
<link rel="alternate" hreflang="en" href="https://docs.blender.org/manual/en/latest/" />
<link rel="alternate" hreflang="ar" href="https://docs.blender.org/manual/ar/latest/" />
<link rel="alternate" hreflang="de" href="https://docs.blender.org/manual/de/latest/" />
<link rel="alternate" hreflang="es" href="https://docs.blender.org/manual/es/latest/" />
<link rel="alternate" hreflang="fi" href="https://docs.blender.org/manual/fi/latest/" />
<link rel="alternate" hreflang="fr" href="https://docs.blender.org/manual/fr/latest/" />
<link rel="alternate" hreflang="id" href="https://docs.blender.org/manual/id/latest/" />
<link rel="alternate" hreflang="it" href="https://docs.blender.org/manual/it/latest/" />
<link rel="alternate" hreflang="ja" href="https://docs.blender.org/manual/ja/latest/" />
<link rel="alternate" hreflang="ko" href="https://docs.blender.org/manual/ko/latest/" />
<link rel="alternate" hreflang="nb" href="https://docs.blender.org/manual/nb/latest/" />
<link rel="alternate" hreflang="pt" href="https://docs.blender.org/manual/pt/latest/" />
<link rel="alternate" hreflang="ru" href="https://docs.blender.org/manual/ru/latest/" />
<link rel="alternate" hreflang="sk" href="https://docs.blender.org/manual/sk/latest/" />
<link rel="alternate" hreflang="sl" href="https://docs.blender.org/manual/sl/latest/" />
<link rel="alternate" hreflang="sr" href="https://docs.blender.org/manual/sr/latest/" />
<link rel="alternate" hreflang="uk" href="https://docs.blender.org/manual/uk/latest/" />
<link rel="alternate" hreflang="vi" href="https://docs.blender.org/manual/vi/latest/" />
<link rel="alternate" hreflang="zh-Hans" href="https://docs.blender.org/manual/zh-hans/latest/" />
<link rel="alternate" hreflang="zh-Hant" href="https://docs.blender.org/manual/zh-hant/latest/" />
<link rel="alternate" hreflang="x-default" href="https://docs.blender.org/manual/en/latest/" />

    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="Input Nodes" href="types/input/index.html" />
    <link rel="prev" title="Sidebar" href="sidebar.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Blender 4.0 Manual
              <img src="../_static/blender-logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/about/index.html">About Blender</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/installing/index.html">Installing Blender</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/configuration/index.html">Configuring Blender</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/help.html">Help System</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Sections</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../interface/index.html">User Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../editors/index.html">Editors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scene_layout/index.html">Scenes &amp; Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modeling/index.html">Modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sculpt_paint/index.html">Sculpting &amp; Painting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../grease_pencil/index.html">Grease Pencil</a></li>
<li class="toctree-l1"><a class="reference internal" href="../animation/index.html">Animation &amp; Rigging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../physics/index.html">Physics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../render/index.html">Rendering</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Compositing</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="sidebar.html">Sidebar</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">GPU Compositor</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#data">Data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#dimensionality">Dimensionality</a></li>
<li class="toctree-l4"><a class="reference internal" href="#type">Type</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#implicit-conversion">Implicit Conversion</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#compositing-space">Compositing Space</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#image-domain">Image Domain</a></li>
<li class="toctree-l4"><a class="reference internal" href="#operation-domain">Operation Domain</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#interpolation">Interpolation</a></li>
<li class="toctree-l5"><a class="reference internal" href="#wrapping">Wrapping</a></li>
<li class="toctree-l5"><a class="reference internal" href="#determining-operation-domain">Determining Operation Domain</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#input-nodes">Input Nodes</a></li>
<li class="toctree-l6"><a class="reference internal" href="#output-nodes">Output Nodes</a></li>
<li class="toctree-l6"><a class="reference internal" href="#other-nodes">Other Nodes</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#considerations">Considerations</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#clipping">Clipping</a></li>
<li class="toctree-l6"><a class="reference internal" href="#pixelation">Pixelation</a></li>
<li class="toctree-l6"><a class="reference internal" href="#pixel-space-operations">Pixel Space Operations</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#output">Output</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#node-types">Node Types</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../movie_clip/index.html">Motion Tracking &amp; Masking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../video_editing/index.html">Video Editing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../files/index.html">Assets, Files, &amp; Data System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../addons/index.html">Add-ons</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/index.html">Advanced</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting/index.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary/index.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Manual Index</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Get Involved</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contribute/index.html">Contribute Documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Blender 4.0 Manual</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Compositing</a></li>
      <li class="breadcrumb-item active">GPU Compositor</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="gpu-compositor">
<span id="realtime-compositor"></span><h1>GPU Compositor<a class="headerlink" href="#gpu-compositor" title="Link to this heading"></a></h1>
<p>The new GPU accelerated compositor introduced in Blender 3.5 and is
currently used for <a class="reference internal" href="../editors/3dview/display/shading.html#viewport-compositing"><span class="std std-ref">viewport compositing</span></a>. This compositor is currently
more limited and not all <a class="reference internal" href="index.html#compositor-nodes"><span class="std std-ref">Compositor Nodes</span></a> are supported, such nodes are
marked with the <span class="guilabel">CPU Compositor Only</span> label along with notes about other limitations.
Moreover, MacOS is not supported due to missing support for modern OpenGL.</p>
<section id="data">
<h2>Data<a class="headerlink" href="#data" title="Link to this heading"></a></h2>
<section id="dimensionality">
<h3>Dimensionality<a class="headerlink" href="#dimensionality" title="Link to this heading"></a></h3>
<p>Compositing nodes operate on data that is either an image or a dimensionless single value. For
instance, the <a class="reference internal" href="types/utilities/levels.html#bpy-types-compositornodelevels"><span class="std std-ref">Levels node</span></a> outputs a single value, while the
<a class="reference internal" href="types/input/scene/render_layers.html#bpy-types-compositornoderlayers"><span class="std std-ref">Render Layers node</span></a> outputs an image. Node inputs that
expect a single value assume a default value if an image is given and ignore the image completely,
for instance, the <a class="reference internal" href="types/transform/transform.html#bpy-types-compositornodetransform"><span class="std std-ref">Transform node</span></a> expects single values
for its inputs and will assume default values if images were given to those inputs. The default
values are those that are considered identity and thus have no effect on the output, so for the
<a class="reference internal" href="types/transform/transform.html#bpy-types-compositornodetransform"><span class="std std-ref">Transform node</span></a>, the <em>X</em>, <em>Y</em>, and <em>Angle</em> inputs will
have a default value of zero, while the <em>Scale</em> input will have a default value of one. On the other
hand, if node inputs that expect an image are given a single value, the single value will be assumed
to cover the whole compositing space. For instance, the <a class="reference internal" href="types/filter/filter.html#bpy-types-compositornodefilter"><span class="std std-ref">Filter node</span></a> expect its <em>Factor</em> input to be an image, but if a single value is
given, it will be assumed to be the same for all pixels.</p>
</section>
<section id="type">
<h3>Type<a class="headerlink" href="#type" title="Link to this heading"></a></h3>
<p>Three types of data exist, all of which are stored in half precision formats:</p>
<dl class="simple">
<dt>Float</dt><dd><p>A signed floating-point number. Integer data is also stored as floats because no integer type
exist.</p>
</dd>
<dt>Vector</dt><dd><p>A 4D vector. While it is 4D, it can have different interpretations depending on the node that uses
it. It can be treated as a 2D vector with the last two components ignored, for instance, the
<em>Vector</em> input of the <a class="reference internal" href="types/transform/displace.html#bpy-types-compositornodedisplace"><span class="std std-ref">Displace node</span></a> is treated as a 2D
vector. It can be treated as a 3D vector with the last component ignored, for instance, the
<em>Vector</em> input of the <a class="reference internal" href="types/vector/separate_xyz.html#bpy-types-compositornodeseparatexyz"><span class="std std-ref">Seperate XYZ node</span></a> is treated as
a 3D vector. It can be treated as two consecutive 2D vectors. For instance the <em>Velocity Pass</em> as
expected by the <a class="reference internal" href="types/filter/blur/vector_blur.html#bpy-types-compositornodevecblur"><span class="std std-ref">Vector Blur node</span></a> is assumed to have the
<em>2D Previous Velocity</em> in the X and Y components of the vector and the <em>2D Next Velocity</em> in the
Z and W components of the vector.</p>
</dd>
<dt>Color</dt><dd><p>A 4D vector storing the Red, Green, Blue, and Alpha of the color. The color is free form and does
not conform to a specific color space or alpha storage model, instead, appropriate nodes will have
settings to control the representation of their output and nodes exist to convert between the
different representations.</p>
</dd>
</dl>
<section id="implicit-conversion">
<h4>Implicit Conversion<a class="headerlink" href="#implicit-conversion" title="Link to this heading"></a></h4>
<p>In case a node input is given data of type other than its own type, the following implicit
conversions are performed:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Source</p></th>
<th class="head"><p>Target</p></th>
<th class="head"><p>Conversion</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Float</p></td>
<td><p>Vector</p></td>
<td><p>f =&gt; Vector(f, f, f, 0)</p></td>
</tr>
<tr class="row-odd"><td><p>Float</p></td>
<td><p>Color</p></td>
<td><p>f =&gt; Color(f, f, f, 1)</p></td>
</tr>
<tr class="row-even"><td><p>Vector</p></td>
<td><p>Float</p></td>
<td><p>(x, y, z, w) =&gt; Average(x, y, z)</p></td>
</tr>
<tr class="row-odd"><td><p>Vector</p></td>
<td><p>Color</p></td>
<td><p>(x, y, z, w) =&gt; Color(x, y, z, 1)</p></td>
</tr>
<tr class="row-even"><td><p>Color</p></td>
<td><p>Float</p></td>
<td><p>(r, g, b, a) =&gt; Average(r, g, b)</p></td>
</tr>
<tr class="row-odd"><td><p>Color</p></td>
<td><p>Vector</p></td>
<td><p>(r, g, b, a) =&gt; Vector(r, g, b, 0)</p></td>
</tr>
</tbody>
</table>
<p>The following example demonstrates implicit conversion between a color type and a float type, since
the <a class="reference internal" href="types/utilities/math.html#bpy-types-compositornodemath"><span class="std std-ref">Math node</span></a> expect float inputs.</p>
<figure class="align-default" id="id1">
<img alt="../_images/compositing_realtime-compositor_compositing-space_data_type_implicit_conversion.png" src="../_images/compositing_realtime-compositor_compositing-space_data_type_implicit_conversion.png" />
<figcaption>
<p><span class="caption-text">An example that demonstrates implicit conversion between a color type and a float type, since the
<em>Math</em> node expects float inputs.</span><a class="headerlink" href="#id1" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
</section>
</section>
<section id="compositing-space">
<h2>Compositing Space<a class="headerlink" href="#compositing-space" title="Link to this heading"></a></h2>
<section id="image-domain">
<h3>Image Domain<a class="headerlink" href="#image-domain" title="Link to this heading"></a></h3>
<p>The compositor is designed in such a way as to allow compositing in an infinite compositing space.
Consequently, images are not only represented by their size, but also by their transformation in
that space, much like 3D objects have transformations. An identity transformation represents an
image that is centered in space. The rectangular area occupied by an image in that space as defined
by its transformation and size is called the <em>Domain</em> of the image. The figure below demonstrates
the domains of two example images.</p>
<figure class="align-default" id="id2">
<img alt="../_images/compositing_realtime-compositor_compositing-space_image-domain_example.png" src="../_images/compositing_realtime-compositor_compositing-space_image-domain_example.png" />
<figcaption>
<p><span class="caption-text">The domains of two example images are illustrated on the compositing space. One of the images is
centered in space and the other is scaled down and translated such that it lies in the upper
right quadrant of the space. Notice that both images have similar sizes in pixels, yet their
apparent sizes are different.</span><a class="headerlink" href="#id2" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>Images can be transformed using nodes like the <a class="reference internal" href="types/transform/transform.html#bpy-types-compositornodetransform"><span class="std std-ref">Transform</span></a>,
<a class="reference internal" href="types/transform/translate.html#bpy-types-compositornodetranslate"><span class="std std-ref">Translate</span></a>, and <a class="reference internal" href="types/transform/rotate.html#bpy-types-compositornoderotate"><span class="std std-ref">Rotate</span></a> nodes.</p>
</section>
<section id="operation-domain">
<h3>Operation Domain<a class="headerlink" href="#operation-domain" title="Link to this heading"></a></h3>
<p><a class="reference internal" href="index.html#compositor-nodes"><span class="std std-ref">Compositor Nodes</span></a> operate on a specific rectangular area of the compositing
space called the <em>Operation Domain</em>. The nodes only consider the area of the input images that
overlap the operation domain and ignores the rest of the images. If an input image doesn’t
completely overlap the operation domain, the rest of the operation domain for that input will be
assumed to be a zero value, a zero vector, or a transparent zero color depending on the type. This
behavior can be changed to an extent, see the section about <em>Wrapping</em> below.</p>
<p>For instance, the figure below illustrates a case where the operation domain of a node is the large
blue area and the domain of an input image is the small red area. In that case, the input image
doesn’t completely overlap the operation domain, so the rest of the blue area for that input image
is assumed to be zero.</p>
<figure class="align-default" id="id3">
<img alt="../_images/compositing_realtime-compositor_compositing-space_operation-domain_example.png" src="../_images/compositing_realtime-compositor_compositing-space_operation-domain_example.png" />
<figcaption>
<p><span class="caption-text">An example case where the operation domain of a node is shown in blue and the domain of an input
image is shown in red. Since the input image doesn’t completely cover the operation domain of the
node, the rest of the blue area for that input image is assumed to be zero.</span><a class="headerlink" href="#id3" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>The previous illustration is a representation of a real world example where one uses the <a class="reference internal" href="types/color/mix/alpha_over.html#bpy-types-compositornodealphaover"><span class="std std-ref">Alpha
Over</span></a> node to overlay a small logo on an image, as shown in the
figure below. In that case, the operation domain covers the entirety of the viewport — as will later
be demonstrated, but the logo covers only a small area of it, so the rest of the area is assumed to
be a zero transparent color, which is convenient for the use case.</p>
<figure class="align-default" id="id4">
<img alt="../_images/compositing_realtime-compositor_compositing-space_operation-domain_real-example.png" src="../_images/compositing_realtime-compositor_compositing-space_operation-domain_real-example.png" />
<figcaption>
<p><span class="caption-text">A real world example where the Alpha Over node is used to over a small logo on an image. The logo
only covers a small area of the operation domain, which is the whole viewport in this case, so
the rest of the area is assumed to be a zero transparent color.</span><a class="headerlink" href="#id4" title="Link to this image"></a></p>
</figcaption>
</figure>
<section id="interpolation">
<h4>Interpolation<a class="headerlink" href="#interpolation" title="Link to this heading"></a></h4>
<p>If an input image to a node is not perfectly aligned with the operation domain of the node or have a
different size in pixels, the node would typically need to do a process called Interpolation, where
the input image is read at the exact positions of the pixels of the operation domain. This can be
done using different interpolation methods, including Nearest-Neighbor, Bilinear, and Bicubic
interpolations. Those interpolation methods are demonstrated in the following
<a class="reference external" href="https://en.wikipedia.org/wiki/Comparison_gallery_of_image_scaling_algorithms">Wikipedia gallery</a>.
Transformation nodes like the <a class="reference internal" href="types/transform/transform.html#bpy-types-compositornodetransform"><span class="std std-ref">Transform</span></a> and <a class="reference internal" href="types/transform/rotate.html#bpy-types-compositornoderotate"><span class="std std-ref">Rotate</span></a> nodes include an interpolation option to set how they prefer their
output image to be read and interpolated.</p>
<p>Note that the transform nodes don’t do any interpolations themselves, they merely record the
preferred interpolation method for the output image and latter nodes that read that image will be
the node that does the actual interpolation. It follows that latter transform nodes will overwrite
the interpolation methods set by former transform nodes if no interpolation took place in-between.</p>
</section>
<section id="wrapping">
<h4>Wrapping<a class="headerlink" href="#wrapping" title="Link to this heading"></a></h4>
<p>While it was previously stated that areas of the input images that do not overlap the operation
domain are assumed to be zero, this is only the default behavior. The alternative behavior is to
instruct the compositor to repeat the input image to fill the missing areas along the horizontal
direction, vertical direction, or both. This can be set in the <em>Wrap</em> option of the <a class="reference internal" href="types/transform/translate.html#bpy-types-compositornodetranslate"><span class="std std-ref">Translate
node</span></a>. Much like the aforementioned interpolation method, the
<em>Translate</em> node doesn’t do any wrapping itself, it merely sets the preferred method of filling
empty spaces and latter nodes that read the image will be the node that does the actual wrapping.</p>
<p>For instance, the previous <em>Alpha Over</em> example but with <em>Both Axis Wrapping</em> enabled is shown in
the figure below.</p>
<figure class="align-default" id="id5">
<img alt="../_images/compositing_realtime-compositor_compositing-space_operation-domain_wrapping.png" src="../_images/compositing_realtime-compositor_compositing-space_operation-domain_wrapping.png" />
<figcaption>
<p><span class="caption-text">The previous example with <em>Alpha Over</em> example but with <em>Both Axis Wrapping</em> enabled.</span><a class="headerlink" href="#id5" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="determining-operation-domain">
<h4>Determining Operation Domain<a class="headerlink" href="#determining-operation-domain" title="Link to this heading"></a></h4>
<p>The question remains on how nodes determine their operation domain. Different node types can have
different mechanisms for determining their operation domain. But generally, three classes of nodes
exist when it comes to the mechanism of determining the operation domain, each of which is presented
in one of the following sections.</p>
<section id="input-nodes">
<h5>Input Nodes<a class="headerlink" href="#input-nodes" title="Link to this heading"></a></h5>
<p>The operation domain of input nodes like the <a class="reference internal" href="types/input/image.html#bpy-types-compositornodeimage"><span class="std std-ref">Image node</span></a> is a
domain with an identity transformation and the same size as their outputs, so for the <em>Image</em> node,
the operation domain will be the domain whose size is the size of the image and whose transformation
is an identity one.</p>
</section>
<section id="output-nodes">
<h5>Output Nodes<a class="headerlink" href="#output-nodes" title="Link to this heading"></a></h5>
<p>The operation domain of output nodes like the <a class="reference internal" href="types/output/viewer.html#bpy-types-compositornodeviewer"><span class="std std-ref">Viewer node</span></a> is
a domain with an identity transformation and the same size as the final compositor output. For
<a class="reference internal" href="../editors/3dview/display/shading.html#viewport-compositing"><span class="std std-ref">viewport compositing</span></a>, that size would be the viewport size, and for
final render compositing, that size would be the scene render size.</p>
</section>
<section id="other-nodes">
<h5>Other Nodes<a class="headerlink" href="#other-nodes" title="Link to this heading"></a></h5>
<p>Unless stated otherwise in their respective documentation pages, all other nodes use the following
mechanism. One of the inputs of the nodes is designated as the <em>Domain Input</em> of the node, and the
operation domain of the node is identical to the domain of that designated input. For many nodes,
the domain input can be intuitively identified as the main input of the node, for instance, the
domain input for the <a class="reference internal" href="types/filter/filter.html#bpy-types-compositornodefilter"><span class="std std-ref">Filter node</span></a> is the <em>Image</em> input. But
there are some caveats to note, which requires a deeper understanding of the mechanism.</p>
<p>Each input in the node has the so called <em>Domain Priority</em> property, the operation domain of the
node is the domain of the non single value input with the highest domain priority. So for instance,
the <a class="reference internal" href="types/filter/filter.html#bpy-types-compositornodefilter"><span class="std std-ref">Filter node</span></a> has two inputs, the domain priority of the
<em>Image</em> input is higher than that of the <em>Factor</em> input, and there are four possible configurations:</p>
<ul class="simple">
<li><p>Both the <em>Image</em> and factor inputs are connected to images. In this case, the <em>Image</em> input is the
domain input because it has the highest priority and is connected to an image.</p></li>
<li><p>The <em>Image</em> input is connected to an image, but the <em>Factor</em> input isn’t. In this case, the
<em>Image</em> input is the domain input because it it is the only input connected to an image regardless
of its priority.</p></li>
<li><p>The <em>Image</em> input is not connected to an image but the <em>Factor</em> input is. In this case, the
<em>Factor</em> input is the domain input because it is the only input connected to an image regardless
of its priority.</p></li>
<li><p>Neither the <em>Image</em> nor the <em>Factor</em> inputs are connected to images, in this case, there isn’t
a domain input because the node is evaluated on single values.</p></li>
</ul>
</section>
</section>
<section id="considerations">
<h4>Considerations<a class="headerlink" href="#considerations" title="Link to this heading"></a></h4>
<p>The aforementioned mechanism for determining the operation domain has a number of consequences that
needs to be considered as they might be undesirable, each of which is presented in one of the
following sections.</p>
<section id="clipping">
<h5>Clipping<a class="headerlink" href="#clipping" title="Link to this heading"></a></h5>
<p>The output of nodes will be intuitively clipped to the operation domain, or rather, the domain of
the domain input. For instance, if the <em>Foreground</em> input is bigger than the <em>Background</em> input in
the <a class="reference internal" href="types/color/mix/alpha_over.html#bpy-types-compositornodealphaover"><span class="std std-ref">Alpha Over node</span></a>, the output will be clipped to the
<em>Background</em> input because it is the domain input, as shown in the following figure.</p>
<figure class="align-default" id="id6">
<img alt="../_images/compositing_realtime-compositor_compositing-space_operation-domain_considerations_clipping.png" src="../_images/compositing_realtime-compositor_compositing-space_operation-domain_considerations_clipping.png" />
<figcaption>
<p><span class="caption-text">The <em>Foreground</em> input is bigger than the <em>Background</em> input in the <em>Alpha Over</em> node, so the
output is intuitively clipped to the <em>Background</em> input because it is the domain input.</span><a class="headerlink" href="#id6" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>The <a class="reference internal" href="types/color/mix/alpha_over.html#bpy-types-compositornodealphaover"><span class="std std-ref">Alpha Over node</span></a> currently doe not support changing
the domain priority for its inputs, so as a workaround, one can use a <a class="reference internal" href="types/color/mix/mix_color.html#bpy-types-compositornodemixrgb"><span class="std std-ref">Mix node</span></a> to achieved the desired behavior, noting that the first <em>Image</em>
input in the <em>Mix</em> node has the highest domain priority, as shown in the following figure.</p>
<figure class="align-default" id="id7">
<img alt="../_images/compositing_realtime-compositor_compositing-space_operation-domain_considerations_clipping-solution.png" src="../_images/compositing_realtime-compositor_compositing-space_operation-domain_considerations_clipping-solution.png" />
<figcaption>
<p><span class="caption-text">Working around the clipping behavior of the <em>Alpha Over</em> node using a Mix node, noting that the
first <em>Image</em> input in the <em>Mix</em> node has the highest domain priority</span><a class="headerlink" href="#id7" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="pixelation">
<h5>Pixelation<a class="headerlink" href="#pixelation" title="Link to this heading"></a></h5>
<p>If the domain input of the node is very large, other inputs will look pixelated. That’s because the
resolution of the domain input is the same, while its apparent size is greatly increased, so the
number of pixels covered by other inputs is much fewer.</p>
<figure class="align-default" id="id8">
<img alt="../_images/compositing_realtime-compositor_compositing-space_operation-domain_considerations_pixelation.png" src="../_images/compositing_realtime-compositor_compositing-space_operation-domain_considerations_pixelation.png" />
<figcaption>
<p><span class="caption-text">An example case where pixelation happens due to very large domain inputs.</span><a class="headerlink" href="#id8" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="pixel-space-operations">
<h5>Pixel Space Operations<a class="headerlink" href="#pixel-space-operations" title="Link to this heading"></a></h5>
<p>Nodes operate on their input images in local pixel space irrespective of their transformation in the
compositing space. For instance, if an image that is rotated by 90 degrees is blurred along the
horizontal direction using the <a class="reference internal" href="types/filter/blur/blur.html#bpy-types-compositornodeblur"><span class="std std-ref">Blur node</span></a>, the blurring will
apparently take place along the vertical direction instead, because the node is applied in the local
pixel space of the input.</p>
</section>
</section>
</section>
</section>
<section id="output">
<h2>Output<a class="headerlink" href="#output" title="Link to this heading"></a></h2>
<p>The GPU compositor only supports a single active output target, that is, only one of the
<a class="reference internal" href="types/output/composite.html#bpy-types-compositornodecomposite"><span class="std std-ref">Composite nodes</span></a>, <a class="reference internal" href="types/output/viewer.html#bpy-types-compositornodeviewer"><span class="std std-ref">Viewer nodes</span></a>, or <a class="reference internal" href="types/output/split_viewer.html#bpy-types-compositornodesplitviewer"><span class="std std-ref">Split Viewer nodes</span></a> in the node tree will be considered active and the rest will
be ignored. In particular, the compositor searches the <em>Active Node Tree Context</em> and falls back to
the <em>Root Node Tree Context</em> if no active output was found in the active node tree context. The
active node tree context is the node tree of an expanded node group, that is, when the users selects
a node group node and edits its underlying tree, while the root node tree context is the top level
node tree without any expanded node groups. The compositor searches for the active <em>Composite</em> node,
if non was found, it searches for the active <em>Viewer</em> node, be it a <em>Viewer</em> or a <em>Split Viewer</em>
node, if non was found, the compositor doesn’t run altogether. Consequently, note that adding a
<em>Viewer</em> node will have no effect if there is a <em>Composite</em> node, since the priority is given to
<em>Composite</em> nodes.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="sidebar.html" class="btn btn-neutral float-left" title="Sidebar" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="types/input/index.html" class="btn btn-neutral float-right" title="Input Nodes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../copyright.html">Copyright</a> : This page is licensed under a CC-BY-SA 4.0 Int. License.
      <span class="lastupdated">Last updated on 12/17/2023.
      </span></p>
  </div>

  
<div class="footer-contribute">
   <ul>
      <li>
         <a href="https://projects.blender.org/blender/blender-manual/src/branch/main/manual/compositing/realtime_compositor.rst"
            class="fa fa-edit"> View Source</a>
      </li>
      <!-- <li>
         <a href="https://projects.blender.org/blender/blender-manual/src/branch/main/manual/compositing/realtime_compositor.rst"
            class="fa fa-edit"> Edit Page</a>
      </li> -->
      <li>
         <a href="https://projects.blender.org/blender/documentation/issues/new?template=.gitea/issue_template/bug.yaml&field:body=%2A%2APage+Information%2A%2A%0D%0AFile%3A+%60manual%2Fcompositing/realtime_compositor.rst%60%0D%0ABlender+Version%3A+%604.0%60%0D%0ADocumentation+Language%3A+%60en%60%0D%0A%5BPermanent+Link%5D%28https%3A%2F%2Fdocs.blender.org%2Fmanual%2Fen%2F4.0%2Fcompositing/realtime_compositor.html%29%0D%0A%0D%0A%2A%2AShort+description+of+error%2A%2A%0D%0A%5BPlease+fill+out+a+short+description+of+the+error+here%5D%0D%0A"
            class="fa fa-bug"> Report issue on this page</a>
      </li>
      <ul>
</div>


</footer>
        </div>
      </div>
    </section>
  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="document versions">
	<ul id="versionwrap" role="presentation">
		<li role="presentation">
			<span id="version-popover" class="version-btn" tabindex="0" role="button" aria-label="versions selector"
				aria-haspopup="true" aria-controls="version-vsnlist" aria-disabled="true">
				4.0
			</span>
			<div class="version-dialog" aria-hidden="true">
				<div class="version-arrow" aria-hidden="true"></div>
				<div class="version-title">Versions</div>
				<ul id="version-vsnlist" class="version-list" role="menu" aria-labelledby="version-popover"
					aria-hidden="true">
					<li role="presentation">Loading...</li>
				</ul>
			</div>
		</li>
		<li role="presentation">
			<span id="lang-popover" class="version-btn" tabindex="0" role="button" aria-label="language selector"
				aria-haspopup="true" aria-controls="version-langlist">
				 en 
			</span>
			<div class="version-dialog" aria-hidden="true">
				<div class="version-arrow" aria-hidden="true"></div>
				<div class="version-title">Languages</div>
				<ul id="version-langlist" class="version-list" role="menu" aria-labelledby="lang-popover"
					aria-hidden="true">
					<li role="presentation">Loading...</li>
				</ul>
			</div>
		</li>
		<template id="version-entry">
			<li tabindex="-1" role="presentation"><a tabindex="-1" role="menuitem"></a></li>
			<li class="selected" tabindex="-1" role="presentation"><span tabindex="-1" aria-current="page"></spanp></li>
		</template>
	</ul>
<template id="version-warning">
	<div class="admonition warning">
		<p class="first admonition-title">Note</p>
		<p class="last">
			You are not using the most up to date version of the documentation.
			<a href="#"></a> is the newest version.
		</p>
	</div>
</template>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-1418081-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-1418081-1', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>