<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Python Scripting &mdash; Blender Manual</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme_overrides.css?v=8da28a04" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/version_switch.css?v=74ca2809" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="canonical" href="https://docs.blender.org/manual/en/latest/render/freestyle/python.html" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=715c20a1"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/js/version_switch.js?v=5cbd935e"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Blender Manual"
          href="../../_static/opensearch.xml"/>
<link rel="alternate" hreflang="en" href="https://docs.blender.org/manual/en/latest/" />
<link rel="alternate" hreflang="ar" href="https://docs.blender.org/manual/ar/latest/" />
<link rel="alternate" hreflang="de" href="https://docs.blender.org/manual/de/latest/" />
<link rel="alternate" hreflang="es" href="https://docs.blender.org/manual/es/latest/" />
<link rel="alternate" hreflang="fi" href="https://docs.blender.org/manual/fi/latest/" />
<link rel="alternate" hreflang="fr" href="https://docs.blender.org/manual/fr/latest/" />
<link rel="alternate" hreflang="id" href="https://docs.blender.org/manual/id/latest/" />
<link rel="alternate" hreflang="it" href="https://docs.blender.org/manual/it/latest/" />
<link rel="alternate" hreflang="ja" href="https://docs.blender.org/manual/ja/latest/" />
<link rel="alternate" hreflang="ko" href="https://docs.blender.org/manual/ko/latest/" />
<link rel="alternate" hreflang="nb" href="https://docs.blender.org/manual/nb/latest/" />
<link rel="alternate" hreflang="pt" href="https://docs.blender.org/manual/pt/latest/" />
<link rel="alternate" hreflang="ru" href="https://docs.blender.org/manual/ru/latest/" />
<link rel="alternate" hreflang="sk" href="https://docs.blender.org/manual/sk/latest/" />
<link rel="alternate" hreflang="sl" href="https://docs.blender.org/manual/sl/latest/" />
<link rel="alternate" hreflang="sr" href="https://docs.blender.org/manual/sr/latest/" />
<link rel="alternate" hreflang="uk" href="https://docs.blender.org/manual/uk/latest/" />
<link rel="alternate" hreflang="vi" href="https://docs.blender.org/manual/vi/latest/" />
<link rel="alternate" hreflang="zh-Hans" href="https://docs.blender.org/manual/zh-hans/latest/" />
<link rel="alternate" hreflang="zh-Hant" href="https://docs.blender.org/manual/zh-hant/latest/" />
<link rel="alternate" hreflang="x-default" href="https://docs.blender.org/manual/en/latest/" />

    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="next" title="Layers &amp; Passes" href="../layers/index.html" />
    <link rel="prev" title="Material Properties" href="material.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Blender 4.0 Manual
              <img src="../../_static/blender-logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/about/index.html">About Blender</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/installing/index.html">Installing Blender</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/configuration/index.html">Configuring Blender</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/help.html">Help System</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Sections</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../interface/index.html">User Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../editors/index.html">Editors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scene_layout/index.html">Scenes &amp; Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modeling/index.html">Modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sculpt_paint/index.html">Sculpting &amp; Painting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../grease_pencil/index.html">Grease Pencil</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../animation/index.html">Animation &amp; Rigging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../physics/index.html">Physics</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Rendering</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../eevee/index.html">EEVEE</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cycles/index.html">Cycles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workbench/index.html">Workbench</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cameras.html">Cameras</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lights/index.html">Lights</a></li>
<li class="toctree-l2"><a class="reference internal" href="../materials/index.html">Materials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shader_nodes/index.html">Shader Nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../color_management.html">Color Management</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Freestyle</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="render.html">Render Properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="view_layer/index.html">View Layer Properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="material.html">Material Properties</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Python Scripting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#writing-style-modules">Writing Style Modules</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#selection">Selection</a></li>
<li class="toctree-l5"><a class="reference internal" href="#chaining">Chaining</a></li>
<li class="toctree-l5"><a class="reference internal" href="#splitting">Splitting</a></li>
<li class="toctree-l5"><a class="reference internal" href="#sorting">Sorting</a></li>
<li class="toctree-l5"><a class="reference internal" href="#stroke-creation">Stroke Creation</a></li>
<li class="toctree-l5"><a class="reference internal" href="#user-control-on-the-pipeline-definition">User Control on the Pipeline Definition</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../layers/index.html">Layers &amp; Passes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../output/index.html">Render Output</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../compositing/index.html">Compositing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../movie_clip/index.html">Motion Tracking &amp; Masking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../video_editing/index.html">Video Editing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../files/index.html">Assets, Files, &amp; Data System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../addons/index.html">Add-ons</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced/index.html">Advanced</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshooting/index.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/index.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../genindex.html">Manual Index</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Get Involved</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">Contribute Documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Blender 4.0 Manual</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Rendering</a></li>
          <li class="breadcrumb-item"><a href="index.html">Freestyle</a></li>
      <li class="breadcrumb-item active">Python Scripting</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="python-scripting">
<span id="bpy-types-freestylemodulesettings"></span><h1>Python Scripting<a class="headerlink" href="#python-scripting" title="Link to this heading"></a></h1>
<p>The Python Scripting mode offers full programmable line stylizes.
In this control mode, all styling operations are written as Python scripts referred to as
style modules in the Freestyle terminology. The input to a style module is a view map
(i.e. a set of detected feature edges), and the output is a set of stylized strokes.</p>
<p>A style module is composed of successive calls of five basic operators: selection, chaining,
splitting, sorting and stroke creation. The selection operator identifies a subset of input
feature edges based on one or more user-defined selection conditions (predicates).
The selected edges are processed with the chaining,
splitting and sorting operators to build chains of feature edges. These operators are also
controlled by user-supplied predicates and functions in order to determine how to transform
the feature edges into chains. Finally, the chains are transformed into stylized strokes
by the stroke creation operator, which takes a list of user-defined stroke shaders.</p>
<p>Python style modules are stored within blend-files as text data-blocks.
External style module files first need to be loaded in the Text Editor.
Then the select menu within an entry of the style module stack
allows you to select a module from the list of loaded style modules.</p>
<figure class="align-default" id="id1">
<img alt="../../_images/render_freestyle_python_scripting-mode.png" src="../../_images/render_freestyle_python_scripting-mode.png" />
<figcaption>
<p><span class="caption-text">A screen capture of a style module <code class="docutils literal notranslate"><span class="pre">cartoon.py</span></code> loaded in the Text Editor (left),
as well as Freestyle options in the Python Scripting mode in the View Layers buttons (right).</span><a class="headerlink" href="#id1" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>Freestyle for Blender comes with a number of Python style modules that can serve as a starting
point of your own style module writing. See also the section of the Freestyle Python API in
the Blender Python API reference manual for the full detail of style module constructs.</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><figure class="align-default" id="id2">
<img alt="../../_images/render_freestyle_python_scripting-mode-example-1.jpg" src="../../_images/render_freestyle_python_scripting-mode-example-1.jpg" />
<figcaption>
<p><span class="caption-text">By T.K. using the Python Scripting mode
(<a class="reference external" href="https://archive.blender.org/wiki/index.php/File:Turning_Pages.zip">blend-file</a>, CC0).</span><a class="headerlink" href="#id2" title="Link to this image"></a></p>
</figcaption>
</figure>
</td>
<td><figure class="align-default" id="id3">
<img alt="../../_images/render_freestyle_python_scripting-mode-example-2.png" src="../../_images/render_freestyle_python_scripting-mode-example-2.png" />
<figcaption>
<p><span class="caption-text">By T.K. using the Python Scripting mode
(<a class="reference external" href="https://archive.blender.org/wiki/index.php/File:Lily_Broken_Topology.zip">blend-file</a>, CC0).</span><a class="headerlink" href="#id3" title="Link to this image"></a></p>
</figcaption>
</figure>
</td>
</tr>
</tbody>
</table>
<section id="writing-style-modules">
<h2>Writing Style Modules<a class="headerlink" href="#writing-style-modules" title="Link to this heading"></a></h2>
<p>A style module is a piece of code responsible for the stylization of Freestyle line drawing.
The input of a style module is a set of feature edges called view map (ViewMap).
The output is a set of stylized lines also referred to as strokes. A style module is
structured as a pipeline of operations that allow for building strokes from the input edges
within the view map.</p>
<p>There are five kinds of operations (listed with corresponding operator functions):</p>
<ul class="simple">
<li><p>Selection <code class="docutils literal notranslate"><span class="pre">Operators.select()</span></code></p></li>
<li><p>Chaining <code class="docutils literal notranslate"><span class="pre">Operators.chain(),</span> <span class="pre">Operators.bidirectional_chain()</span></code></p></li>
<li><p>Splitting <code class="docutils literal notranslate"><span class="pre">Operators.sequential_split(),</span> <span class="pre">Operators.recursive_split()</span></code></p></li>
<li><p>Sorting <code class="docutils literal notranslate"><span class="pre">Operators.sort()</span></code></p></li>
<li><p>Stroke creation <code class="docutils literal notranslate"><span class="pre">Operators.create()</span></code></p></li>
</ul>
<p>The input view map is populated with a set of ViewEdge objects. The selection operation is
used to pick up ViewEdges of interest to artists based on user-defined selection conditions
(predicates). Chaining operations take the subset of ViewEdges and build Chains by
concatenating ViewEdges according to user-defined predicates and functions.
The Chains can be further refined by splitting them into smaller pieces
(e.g. at points where edges make an acute turn) and selecting a fraction of them
(e.g. to keep only those longer than a length threshold).
The sorting operation is used to arrange the stacking order of chains to draw one line on top of another.
The chains are finally transformed into stylized strokes
by the stroke creation operation applying a series of stroke shaders to individual chains.</p>
<p>ViewEdges, Chains and Strokes are generically referred to as one-dimensional (1D) elements.
A 1D element is a polyline that is a series of connected straight lines.
Vertices of 1D elements are called 0D elements in general.</p>
<p>All the operators act on a set of active 1D elements.
The initial active set is the set of ViewEdges in the input view map.
The active set is updated by the operators.</p>
<section id="selection">
<h3>Selection<a class="headerlink" href="#selection" title="Link to this heading"></a></h3>
<p>The selection operator goes through every element of the active set and keeps only the ones
satisfying a certain predicate. The <code class="docutils literal notranslate"><span class="pre">Operators.select()</span></code> method takes as the argument a unary
predicate that works on any <code class="docutils literal notranslate"><span class="pre">Interface1D</span></code> that represents a 1D element. For example:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">Operators</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">QuantitativeInvisibilityUP1D</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
</pre></div>
</div>
<p>This selection operation uses the <code class="docutils literal notranslate"><span class="pre">QuantitativeInvisibilityUP1D</span></code> predicate to select only
the visible <code class="docutils literal notranslate"><span class="pre">ViewEdge</span></code> (more precisely, those whose quantitative invisibility is equal to 0).
The selection operator is intended to selectively apply the style to a fraction of the active 1D elements.</p>
<p>It is noted that <code class="docutils literal notranslate"><span class="pre">QuantitativeInvisibilityUP1D</span></code> is a class implementing the predicate that tests line visibility,
and the <code class="docutils literal notranslate"><span class="pre">Operators.select()</span></code> method takes an instance of the predicate class as argument.
The testing of the predicate for a given 1D element is actually done by calling the predicate instance,
that is, by invoking the <code class="docutils literal notranslate"><span class="pre">__call__</span></code> method of the predicate class. In other words, the <code class="docutils literal notranslate"><span class="pre">Operators.select()</span></code>
method takes as argument a functor which in turn takes an <code class="docutils literal notranslate"><span class="pre">Interface0D</span></code> object as argument.
The Freestyle Python API employs functors extensively to implement predicates, as well as functions.</p>
</section>
<section id="chaining">
<h3>Chaining<a class="headerlink" href="#chaining" title="Link to this heading"></a></h3>
<p>The chaining operators act on the set of active <code class="docutils literal notranslate"><span class="pre">ViewEdge</span></code> objects and determine the topology
of the future strokes.
The idea is to implement an iterator to traverse the ViewMap graph by marching along ViewEdges.
The iterator defines a chaining rule that determines the next <code class="docutils literal notranslate"><span class="pre">ViewEdge</span></code>
to follow at a given vertex (see <code class="docutils literal notranslate"><span class="pre">ViewEdgeIterator</span></code>). Several such iterators are provided
as part of the Freestyle Python API (see <code class="docutils literal notranslate"><span class="pre">ChainPredicateIterator</span></code> and <code class="docutils literal notranslate"><span class="pre">ChainSilhouetteIterator</span></code>).
Custom iterators can be defined by inheriting the <code class="docutils literal notranslate"><span class="pre">ViewEdgeIterator</span></code> class.
The chaining operator also takes as argument a UnaryPredicate working on <code class="docutils literal notranslate"><span class="pre">Interface1D</span></code> as a stopping criteria.
The chaining stops when the iterator has reached a <code class="docutils literal notranslate"><span class="pre">ViewEdge</span></code> satisfying this
predicate during the march along the graph.</p>
<p>Chaining can be either unidirectional <code class="docutils literal notranslate"><span class="pre">Operators.chain()</span></code> or bidirectional <code class="docutils literal notranslate"><span class="pre">Operators.bidirectional_chain()</span></code>.
In the latter case, the chaining will propagate in the two directions from the starting edge.</p>
<p>The following is a code example of bidirectional chaining:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">Operators</span><span class="o">.</span><span class="n">bidirectional_chain</span><span class="p">(</span>
        <span class="n">ChainSilhouetteIterator</span><span class="p">(),</span>
        <span class="n">NotUP1D</span><span class="p">(</span><span class="n">QuantitativeInvisibilityUP1D</span><span class="p">(</span><span class="mi">0</span><span class="p">)),</span>
        <span class="p">)</span>
</pre></div>
</div>
<p>The chaining operator uses the <code class="docutils literal notranslate"><span class="pre">ChainSilhouetteIterator</span></code> as the chaining rule and stops chaining
as soon as the iterator has come to an invisible <code class="docutils literal notranslate"><span class="pre">ViewEdge</span></code>.</p>
<p>The chaining operators process the set of active <code class="docutils literal notranslate"><span class="pre">ViewEdge</span></code> objects in order.
The active ViewEdges can be previously sorted using the <code class="docutils literal notranslate"><span class="pre">Operators.sort()</span></code> method (see below).
It starts a chain with the first <code class="docutils literal notranslate"><span class="pre">ViewEdge</span></code> of the active set.
All ViewEdges that have already been involved in the chaining process are marked
(in the case of the example above, the time stamp of each <code class="docutils literal notranslate"><span class="pre">ViewEdge</span></code> is modified by default),
in order not to process the same <code class="docutils literal notranslate"><span class="pre">ViewEdge</span></code> twice.
Once the chaining reaches a <code class="docutils literal notranslate"><span class="pre">ViewEdge</span></code> that satisfies the stopping predicate, the chain is terminated.
Then a new chain is started from the first unmarked <code class="docutils literal notranslate"><span class="pre">ViewEdge</span></code> in the active set.
This operation is repeated until the last unmarked <code class="docutils literal notranslate"><span class="pre">ViewEdge</span></code> of the active set was processed.
At the end of the chaining operation,
the active set is set to the Chains that have just been constructed.</p>
</section>
<section id="splitting">
<h3>Splitting<a class="headerlink" href="#splitting" title="Link to this heading"></a></h3>
<p>The splitting operation is used to refine the topology of each Chain.
Splitting is performed either sequentially or recursively. Sequential splitting
<code class="docutils literal notranslate"><span class="pre">Operators.sequentialSplit()</span></code> in its basic form,
parses the Chain at a given arbitrary resolution and evaluates a unary predicate
(working on 0D elements) at each point along the Chain.
Every time the predicate is satisfied, the chain is split into two chains.
At the end of the sequential split operation,
the active set of chains is set to the new chains.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">Operators</span><span class="o">.</span><span class="n">sequentialSplit</span><span class="p">(</span><span class="n">TrueUP0D</span><span class="p">(),</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>In this example, the chain is split every 2 units.
A more elaborated version uses two predicates instead of one: One to determine the starting
point of the new chain and the other to determine its ending point. This second version can
lead to a set of Chains that are disjoint or that overlap if the two predicates are different
(see <code class="docutils literal notranslate"><span class="pre">Operators.sequentialSplit()</span></code> for more details).</p>
<p>Recursive splitting <code class="docutils literal notranslate"><span class="pre">Operators.recursiveSplit()</span></code> evaluates a function
on the 0D elements along the Chain at a given resolution and
find the point that gives the maximum value for the function.
The Chain is then split into two at that point.
This process is recursively repeated on each of the two new Chains,
until the input Chain satisfies a user-specified stopping condition.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">func</span> <span class="o">=</span> <span class="n">Curvature2DAngleF0D</span><span class="p">()</span>
<span class="n">Operators</span><span class="o">.</span><span class="n">recursive_split</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">NotUP1D</span><span class="p">(</span><span class="n">HigherLengthUP1D</span><span class="p">(</span><span class="mi">5</span><span class="p">)),</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>In the code example above,
the Chains are recursively split at points of the highest 2D curvature.
The curvature is evaluated at points along the Chain at a resolution of 5 units.
Chains shorter than 5 units will not be split anymore.</p>
</section>
<section id="sorting">
<h3>Sorting<a class="headerlink" href="#sorting" title="Link to this heading"></a></h3>
<p>The sorting operator <code class="docutils literal notranslate"><span class="pre">Operators.sort()</span></code> arranges the stacking order of active 1D elements.
It takes as argument a binary predicate used as a “smaller than” operator to order two 1D elements.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">Operators</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">Length2DBP1D</span><span class="p">())</span>
</pre></div>
</div>
<p>In this code example, the sorting uses the <code class="docutils literal notranslate"><span class="pre">Length2DBP1D</span></code> binary predicate to sort
the <code class="docutils literal notranslate"><span class="pre">Interface1D</span></code> objects in the ascending order in terms of 2D length.</p>
<p>The sorting is particularly useful when combined with causal density. Indeed,
the causal density evaluates the density of the resulting image as it is modified. If we wish
to use such a tool to decide to remove strokes whenever the local density is too high,
it is important to control the order in which the strokes are drawn. In this case,
we would use the sorting operator to ensure that the most “important” lines are drawn first.</p>
</section>
<section id="stroke-creation">
<h3>Stroke Creation<a class="headerlink" href="#stroke-creation" title="Link to this heading"></a></h3>
<p>Finally, the stroke creation operator <code class="docutils literal notranslate"><span class="pre">Operators.create()</span></code>
takes the active set of Chains as input and build Strokes. The operator takes two arguments.
The first is a unary predicate that works on <code class="docutils literal notranslate"><span class="pre">Interface1D</span></code> that is designed to make a last
selection on the set of chains.
A Chain that does not satisfy the condition will not lead to a Stroke.
The second input is a list of shaders that will be responsible for the shading of each built stroke.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">shaders_list</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">SamplingShader</span><span class="p">(</span><span class="mf">5.0</span><span class="p">),</span>
    <span class="n">ConstantThicknessShader</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
    <span class="n">ConstantColorShader</span><span class="p">(</span><span class="mf">0.2</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span>
    <span class="p">]</span>
<span class="n">Operators</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">DensityUP1D</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">IntegrationType</span><span class="o">.</span><span class="n">MEAN</span><span class="p">),</span> <span class="n">shaders_list</span><span class="p">)</span>
</pre></div>
</div>
<p>In this example,
the <code class="docutils literal notranslate"><span class="pre">DensityUP1D</span></code> predicate is used to remove all Chains whose mean density is higher than 0.1.
Each chain is transformed into a stroke by resampling it so as to have a point every 5 units
and assigning to it a constant thickness of 2 units and a dark gray constant color.</p>
</section>
<section id="user-control-on-the-pipeline-definition">
<h3>User Control on the Pipeline Definition<a class="headerlink" href="#user-control-on-the-pipeline-definition" title="Link to this heading"></a></h3>
<p>Style module writing offers different types of user control,
even though individual style modules have a fixed pipeline structure.
One is the sequencing of different pipeline control structures, and another is through
the definition of functor objects that are passed as argument all along the pipeline.</p>
<p>Different pipeline control structures can be defined by sequencing the selection,
chaining, splitting, and sorting operations.
The stroke creation is always the last operation that concludes a style module.</p>
<p>Predicates, functions, chaining iterators, and stroke shaders can be defined by inheriting
base classes and overriding appropriate methods. See the reference manual entries of
the following base classes for more information on the user-scriptable constructs.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>Predicates, functions, chaining iterators, and stroke shaders can be defined by
inheriting base classes and overriding appropriate methods.
See <a class="reference external" href="https://docs.blender.org/api/4.0/freestyle.html#module-freestyle" title="(in Blender 4.0.3 Release Candidate Python API v4.0)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Freestyle</span> <span class="pre">python</span> <span class="pre">module</span></code></a> for more information
on the user-scriptable constructs.</p>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="material.html" class="btn btn-neutral float-left" title="Material Properties" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../layers/index.html" class="btn btn-neutral float-right" title="Layers &amp; Passes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../copyright.html">Copyright</a> : This page is licensed under a CC-BY-SA 4.0 Int. License.
      <span class="lastupdated">Last updated on 12/17/2023.
      </span></p>
  </div>

  
<div class="footer-contribute">
   <ul>
      <li>
         <a href="https://projects.blender.org/blender/blender-manual/src/branch/main/manual/render/freestyle/python.rst"
            class="fa fa-edit"> View Source</a>
      </li>
      <!-- <li>
         <a href="https://projects.blender.org/blender/blender-manual/src/branch/main/manual/render/freestyle/python.rst"
            class="fa fa-edit"> Edit Page</a>
      </li> -->
      <li>
         <a href="https://projects.blender.org/blender/documentation/issues/new?template=.gitea/issue_template/bug.yaml&field:body=%2A%2APage+Information%2A%2A%0D%0AFile%3A+%60manual%2Frender/freestyle/python.rst%60%0D%0ABlender+Version%3A+%604.0%60%0D%0ADocumentation+Language%3A+%60en%60%0D%0A%5BPermanent+Link%5D%28https%3A%2F%2Fdocs.blender.org%2Fmanual%2Fen%2F4.0%2Frender/freestyle/python.html%29%0D%0A%0D%0A%2A%2AShort+description+of+error%2A%2A%0D%0A%5BPlease+fill+out+a+short+description+of+the+error+here%5D%0D%0A"
            class="fa fa-bug"> Report issue on this page</a>
      </li>
      <ul>
</div>


</footer>
        </div>
      </div>
    </section>
  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="document versions">
	<ul id="versionwrap" role="presentation">
		<li role="presentation">
			<span id="version-popover" class="version-btn" tabindex="0" role="button" aria-label="versions selector"
				aria-haspopup="true" aria-controls="version-vsnlist" aria-disabled="true">
				4.0
			</span>
			<div class="version-dialog" aria-hidden="true">
				<div class="version-arrow" aria-hidden="true"></div>
				<div class="version-title">Versions</div>
				<ul id="version-vsnlist" class="version-list" role="menu" aria-labelledby="version-popover"
					aria-hidden="true">
					<li role="presentation">Loading...</li>
				</ul>
			</div>
		</li>
		<li role="presentation">
			<span id="lang-popover" class="version-btn" tabindex="0" role="button" aria-label="language selector"
				aria-haspopup="true" aria-controls="version-langlist">
				 en 
			</span>
			<div class="version-dialog" aria-hidden="true">
				<div class="version-arrow" aria-hidden="true"></div>
				<div class="version-title">Languages</div>
				<ul id="version-langlist" class="version-list" role="menu" aria-labelledby="lang-popover"
					aria-hidden="true">
					<li role="presentation">Loading...</li>
				</ul>
			</div>
		</li>
		<template id="version-entry">
			<li tabindex="-1" role="presentation"><a tabindex="-1" role="menuitem"></a></li>
			<li class="selected" tabindex="-1" role="presentation"><span tabindex="-1" aria-current="page"></spanp></li>
		</template>
	</ul>
<template id="version-warning">
	<div class="admonition warning">
		<p class="first admonition-title">Note</p>
		<p class="last">
			You are not using the most up to date version of the documentation.
			<a href="#"></a> is the newest version.
		</p>
	</div>
</template>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-1418081-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-1418081-1', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>